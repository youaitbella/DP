<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf">

    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="parentNode" class="org.inek.portallib.tree.MenuTreeNode"/> 
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
        <ui:repeat value="#{cc.attrs.parentNode.children}" var="node" >
            <div style="margin-left:16px;">
                <h:commandLink action="#{node.toggle}" immediate="true" >
                    <h:graphicImage alt="auf/zuklappen" name="Icon/small/#{node.expanded ? 'ButtonMinus.png' : 'ButtonPlus.png'}" title="Details auf/zuklappen" value=""/>
                    <f:ajax render="@this SubNode"/>
                </h:commandLink>
                <h:commandLink styleClass="third marginTop" action="#{node.text}" value="#{node.text}" immediate="true"/>

                <div jsf:id="SubNode" style="margin-left:16px; padding-bottom: 1em;">
                    <h:outputLabel value="Dieser Kooperationspartner hat noch keine NUB-Anfrage zur Freigabe an Sie gesendet" rendered="#{node.expanded and node.children.size() eq 0}"/>
                </div>
            </div>
        </ui:repeat>

    </cc:implementation>
</html>