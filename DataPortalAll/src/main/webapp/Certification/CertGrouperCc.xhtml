<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="Cert.xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:cb="http://inek.org/dataportal/clientbehaviour"
                >

    <ui:define name="editContent">
        <h2>Emailversand</h2>

        <h:form id="frmEmailSending">
            
            <div class="inputPart">
                <h:outputLabel styleClass="label30">
                    Hersteller:
                </h:outputLabel>
                <h:selectOneMenu id="selectedTemplate" styleClass="inputmedium" value="#{certGrouperCc.selectedAccountId}">
                    <f:selectItem itemValue="#{null}" itemLabel="Bitte wählen..." />
                    <f:selectItems value="#{certManager.allGrouperAccounts}" 
                                   var="item"
                                   itemLabel="#{item.company} - #{item.email}" itemValue="#{item.id}"/>
                    <f:ajax event="change" render="@all :logout:remaining" listener="#{certGrouperCc.selectedAccountChanged}"/>
                </h:selectOneMenu> 
            </div>
                        
            <h:dataTable rendered="#{certGrouperCc.selectedAccountId > 0}" value="#{certGrouperCc.additionalEmails}"
                         headerClass="list-header" id="tblEmailReceiversTemplate"
                         var="item" width="100%" rowClasses="row1, row2" columnClasses="colIcon, colValue">
                <h:column id="colDelete">
                    <h:commandLink immediate="true" rendered="#{item.id gt 0}">
                        <h:graphicImage alt="löschen" name="Icon/small/delete.png" title="Löschen" value=""/>
                        <cb:confirmDelete/>
                        <f:ajax render="@all :logout:remaining" listener="#{certGrouperCc.deleteAdditionalCc(item)}"/>
                    </h:commandLink>
                </h:column>
                <h:column id="colCc">
                    <f:facet name="header">
                        <h:outputText value="CC-Mail"/>
                    </f:facet>
                    <h:outputLabel value="#{item.email}" rendered="#{item.id gt 0}"/>
                    <h:inputText styleClass="inputmedium" rendered="#{item.id le 0 or item.id == null}" value="#{item.email}">
                        <f:ajax event="blur" render="@this :logout:remaining" />
                    </h:inputText>
                </h:column>
            </h:dataTable>
            <h:commandLink id="addButton" styleClass="addButton inputPart" value="#{msg.btnAddEntry}" rendered="#{certGrouperCc.selectedAccountId > 0}">
                <f:ajax event="click" render="@form :logout:remaining" listener="#{certGrouperCc.addNewAdditonalEmail}"/>
            </h:commandLink>
            
            <div class="inputPart" style="float: right;">
                <h:commandLink styleClass="bigButton" value="Speichern" action="#{certGrouperCc.saveGrouperCcs}"/>
            </div>
            <div style="clear: both;" />
            
            
        </h:form>

    </ui:define>

</ui:composition>
