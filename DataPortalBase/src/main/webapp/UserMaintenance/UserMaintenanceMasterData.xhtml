<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                template="UserMaintenanceTemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:pf="http://primefaces.org/ui"
                xmlns:inek="http://xmlns.jcp.org/jsf/composite/components/Input">
    <ui:define name="maintenanceContent">
        <h2>Allgemein</h2>
        <h:form>
            <div class="ui-g ui-fluid">
                <div class="ui-g-8 ui-md-6">
                    <inek:InputTextValidator value="#{editUserMaintenance.user}"
                                             require="true"
                                             requiredMessage="Bitte geben Sie einen Anwendernamen an"
                                             labelText="Anwendername"
                                             maxlength="50"
                                             validatorFunction="#{editUserMaintenance.checkUser}"
                                             validatorMessage="Diese Anwendername ist bereits vorhanden oder ungültig" />
                </div>
                <div class="ui-g-8 ui-md-6">
                    <inek:InputText value="#{editUserMaintenance.account.company}"
                                    require="true"
                                    requiredMessage="Bitte geben Sie eine Krankenhaus oder ein Firma an"
                                    labelText="Krankenhaus / Firma"/>
                </div>
            </div>
            <div class="ui-g ui-fluid">
                <div class="ui-g-8 ui-md-3">
                    <pf:outputLabel class="formLabel" value="Anrede:* " />
                    <pf:selectOneMenu id="gender" required="true" value="#{editUserMaintenance.account.gender}">
                        <f:selectItems value="#{sessionTools.genderItems}"/>
                    </pf:selectOneMenu>
                    <pf:message for="gender" />
                </div>

                <div class="ui-g-8 ui-md-3">
                    <pf:outputLabel class="formLabel" value="Titel: " />
                    <pf:inputText id="title" placeholder="Titel" value="#{editUserMaintenance.account.title}" maxlength="50" />
                    <pf:message for="title" />
                </div>

                <div class="ui-g-8 ui-md-6">
                    <pf:outputLabel class="formLabel" value="Krankenhaus- bzw. Unternehmenstyp:* " />
                    <pf:selectOneMenu id="customertyp" required="true" value="#{editUserMaintenance.account.customerTypeId}" >
                        <f:selectItems value="#{sessionTools.customerTypeItems}"/>
                    </pf:selectOneMenu>
                    <pf:message for="customertyp" />
                </div>
            </div>
            <div class="ui-g ui-fluid">
                <div class="ui-g-8 ui-md-6">
                    <pf:outputLabel class="formLabel" value="Vorname:* " />
                    <pf:inputText id="firstname" required="true" requiredMessage="Bitte geben Sie einen Vornamen an" placeholder="Vorname" value="#{editUserMaintenance.account.firstName}" maxlength="50" />
                    <pf:message for="firstname" />
                </div>
                <div class="ui-g-8 ui-md-6">
                    <pf:outputLabel class="formLabel" value="Straße:* " />
                    <pf:inputText id="street" required="true" requiredMessage="Bitte geben Sie eine Straße an" placeholder="Straße" value="#{editUserMaintenance.account.street}" maxlength="50" />
                    <pf:message for="street" />
                </div>
                <div class="ui-g-8 ui-md-6">
                    <pf:outputLabel class="formLabel" value="Name:* " />
                    <pf:inputText id="lastname" required="true" requiredMessage="Bitte geben Sie einen Nachnamen an" placeholder="Name" value="#{editUserMaintenance.account.lastName}" maxlength="50" />
                    <pf:message for="lastname" />
                </div>
                <div class="ui-g-8 ui-md-6">
                    <pf:outputLabel class="formLabel" value="PLZ:* " />
                    <pf:inputText id="plz" required="true" requiredMessage="Bitte geben Sie eine PLZ an" placeholder="PLZ" value="#{editUserMaintenance.account.postalCode}" maxlength="5" />
                    <pf:message for="plz" />
                </div>
                <div class="ui-g-8 ui-md-6">
                    <pf:outputLabel class="formLabel" value="Funktion:* " />
                    <pf:selectOneMenu id="role" value="#{editUserMaintenance.account.roleId}" required="true">
                        <f:selectItems value="#{sessionTools.contactRoleItems}"/>
                    </pf:selectOneMenu>
                    <pf:message for="role" />
                </div>
                <div class="ui-g-8 ui-md-6">
                    <pf:outputLabel class="formLabel" value="Ort:* " />
                    <pf:inputText id="town" required="true" requiredMessage="Bitte geben Sie einen Ort an" placeholder="Ort" value="#{editUserMaintenance.account.town}" maxlength="50" />
                    <pf:message for="town" />
                </div>
                <div class="ui-g-8 ui-md-6">
                    <pf:outputLabel class="formLabel" value="Telefon / Durchwahl: " />
                    <pf:inputText id="tel" placeholder="Telefon / Durchwahl" value="#{editUserMaintenance.account.phone}" maxlength="50" />
                    <pf:message for="tel" />
                </div>

                <div class="ui-g-8 ui-md-6">
                    <pf:outputLabel class="formLabel" value="Telefon : " />
                    <pf:inputText id="ctel" placeholder="Telefon" value="#{editUserMaintenance.account.customerPhone}" maxlength="50" />
                    <pf:message for="ctel" />
                </div>
            </div>

            <div class="ui-g ui-fluid">
                <div class="ui-g-8 ui-md-6">
                </div>
                <div class="ui-g-8 ui-md-6">
                    <pf:outputLabel class="formLabel" value="Telefax: " />
                    <pf:inputText id="cfax" placeholder="Telefax" value="#{editUserMaintenance.account.customerFax}" maxlength="50" />
                    <pf:message for="cfax" />
                </div>
            </div>
            <div class="ui-g ui-fluid">
                <div class="ui-g-8 ui-md-6">
                    <h2>IK - Verwaltung</h2>
                    <pf:dataTable id="iks"
                                  var="accountIk"
                                  widgetVar="accountIks"
                                  value="#{editUserMaintenance.account.accountIks}"
                                  emptyMessage="Keine IK's eingetragen"
                                  tableStyle="width: auto">
                        <pf:column class="colIcon">
                            <pf:commandLink rendered="#{editUserMaintenance.removeIkAllowed(accountIk.IK)}"
                                            action="#{editUserMaintenance.removeIK(accountIk.IK)}"
                                            update="iks"
                                            process="@this">
                                <h:graphicImage alt="löschen" name="Icon/small/delete.png" title="Löschen" value=""/>
                            </pf:commandLink>
                        </pf:column>
                        <pf:column headerText="IK">
                            <pf:inputNumber id="ikInput"
                                            readonly="#{!editUserMaintenance.removeIkAllowed(accountIk.IK)}"
                                            validator="#{editUserMaintenance.isIKValid}"
                                            thousandSeparator=""
                                            decimalPlaces="0"
                                            validatorMessage="Ungültige IK"
                                            required="True"
                                            value="#{accountIk.IK}" >
                                <pf:ajax event="blur" update="customerName ikInput_m" />
                            </pf:inputNumber>
                            <pf:message id="ikInput_m" for="ikInput" />
                        </pf:column>
                        <pf:column headerText="Name">
                            <pf:outputLabel id="customerName" value="#{editUserMaintenance.hasIkAdminText(accountIk.IK)}" />
                        </pf:column>
                    </pf:dataTable>
                    <br />
                    <div class="ui-g-8 ui-md-5">
                        <pf:commandButton value="Weitere IK hinzufügen" icon="fa fa-plus" process="@this" action="#{editUserMaintenance.addNewIK()}" oncomplete="PF('accountIks').addRow();"/>
                    </div>
                </div>
                <div class="ui-g-8 ui-md-6">
                    <h2>Konfiguration</h2>
                    <h:panelGrid columns="2" style="margin-bottom:10px" cellspacing="5">
                        <pf:selectBooleanCheckbox id="nubConfirmation"
                                                  value="#{editUserMaintenance.account.nubConfirmation}"
                                                  disabled="#{!editUserMaintenance.featureNub}" />
                        <pf:outputLabel for="nubConfirmation" value="#{msg.lblNubConfirmation}" />

                        <pf:selectBooleanCheckbox id="nubInformation"
                                                  value="#{editUserMaintenance.account.nubInformationMail}"
                                                  disabled="#{!editUserMaintenance.featureNub}" />
                        <pf:outputLabel for="nubInformation" value="#{msg.lblNubInformation}" />

                        <pf:selectBooleanCheckbox id="messageCopy"
                                                  value="#{editUserMaintenance.account.messageCopy}"
                                                  disabled="#{!editUserMaintenance.featureCoop}" />
                        <pf:outputLabel for="messageCopy" value="#{msg.lblMessageCopy}" />
                    </h:panelGrid>

                    <pf:outputLabel class="formLabel" for="dropBoxHoldTime" value="#{msg.lblDropBoxHoldTime}:"/>
                    <pf:inputNumber id="dropBoxHoldTime"
                                    value="#{editUserMaintenance.account.dropBoxHoldTime}"
                                    thousandSeparator="."
                                    decimalPlaces="0" />
                </div>
            </div>
            <br /><br />
            <div class="ui-fluid">
                <pf:commandLink styleClass="bigButton"
                                update="@(.ui-message) Box iks"
                                action="#{editUserMaintenance.save}"
                                value="#{msg.btnSave}" />
            </div>
        </h:form>

    </ui:define>
</ui:composition>

