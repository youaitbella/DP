<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                template="UserMaintenanceTemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:pf="http://primefaces.org/ui">
    <ui:define name="maintenanceContent">
        <pf:ajaxStatus style="display:block;position:absolute;bottom: 5px;right: 5px;z-index:100">
            <f:facet name="start">
                <pf:graphicImage height="100" width="100" name="Image/load.gif" />
            </f:facet>
            <f:facet name="complete">
                <h:outputText value="" />
            </f:facet>
        </pf:ajaxStatus>
        <style>
            .ui-widget-content {
                background: #eeeeee !important
            }

        </style>
        <div class="inputleft">
            <p>
                <h:outputLabel styleClass="label" for="user" value="#{msg.lblUser}:"/>
                <h:message for="user" id="msgUser" styleClass="errorMessage"/>
                <br/>
                <h:inputText styleClass="input" id="user" value="#{editUserMaintenance.user}" immediate="false"
                             required="true" requiredMessage="#{msg.msgValueNeeded}"
                             validator="#{editUserMaintenance.checkUser}" maxlength="50"
                             title="#{msg.tipUserName}">
                    <f:ajax event="blur" render="@this :logout:remaining msgUser"/>
                </h:inputText>
            </p>
            <p>
                <h:panelGrid columns="3" width="90%">
                    <h:panelGroup styleClass="inputmedium">
                        <h:outputLabel styleClass="label" for="cbxGender" value="#{msg.lblSalutation}"/>
                        <h:message id="msgGender" for="cbxGender" styleClass="errorMessage"/>
                        <br/>
                        <h:selectOneMenu styleClass="inputshort" id="cbxGender" value="#{editUserMaintenance.account.gender}"
                                         required="true" requiredMessage="#{msg.msgChooseEntryShort}">
                            <f:selectItems value="#{sessionTools.genderItems}"/>
                            <f:ajax event="change" render="@this :logout:remaining msgGender"/>
                        </h:selectOneMenu>
                    </h:panelGroup>
                    <h:panelGroup>
                        <h:outputLabel styleClass="label" for="title" value="#{msg.lblTitle}"/>
                        <br/>
                        <h:inputText styleClass="inputmedium" id="title" value="#{editUserMaintenance.account.title}" required="false" maxlength="50"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        <h:outputLabel styleClass="label" for="initials" value="#{msg.lblInitials}"/>
                        <br/>
                        <h:inputText styleClass="inputshort" id="initials" value="#{editUserMaintenance.account.initials}" required="false" maxlength="5"/>
                    </h:panelGroup>
                </h:panelGrid>
            </p>
            <p>
                <h:outputLabel styleClass="label" for="firstname" value="#{msg.lblFirstName}:"/>
                <h:message for="firstname" id="msgFirstname" styleClass="errorMessage"/>
                <br/>
                <h:inputText styleClass="input" id="firstname" value="#{editUserMaintenance.account.firstName}"
                             required="true" requiredMessage="#{msg.msgValueNeeded}" maxlength="50">
                    <f:validator validatorId="RequiredValidator"/>
                    <f:ajax event="blur" render="@this :logout:remaining msgFirstname"/>
                </h:inputText>
            </p>
            <p>
                <h:outputLabel styleClass="label" for="lasttname" value="#{msg.lblLastName}:"/>
                <h:message id="msgLastname" for="lasttname" styleClass="errorMessage"/>
                <br/>
                <h:inputText styleClass="input" id="lasttname" value="#{editUserMaintenance.account.lastName}"
                             required="true" requiredMessage="#{msg.msgValueNeeded}" maxlength="50">
                    <f:validator validatorId="RequiredValidator"/>
                    <f:ajax event="blur" render="@this :logout:remaining msgLastname"/>
                </h:inputText>
            </p>
            <p>
                <h:outputLabel styleClass="label" for="contactRole" value="#{msg.lblContactRole}:"/>
                <h:message id="msgContactRole" for="contactRole" styleClass="errorMessage"/>
                <br/>
                <h:selectOneMenu styleClass="input" id="contactRole" value="#{editUserMaintenance.account.roleId}" required="true" requiredMessage="#{msg.lblChooseEntry}">
                    <f:selectItems value="#{sessionTools.contactRoleItems}"/>
                    <f:ajax event="change" render="@this :logout:remaining msgContactRole"/>
                </h:selectOneMenu>
            </p>
            <p>
                <h:outputLabel styleClass="label" for="contactPhone" value="#{msg.lblContactPhone}:"/>
                <h:message id="msgContactPhone" for="contactPhone" styleClass="errorMessage"/>
                <br/>
                <h:inputText styleClass="input" id="contactPhone" value="#{editUserMaintenance.account.phone}" required="false" maxlength="50">
                    <f:ajax event="blur" render="@this :logout:remaining msgContactPhone"/>
                </h:inputText>
            </p>
        </div>
        <div class="inputright">
            <p>
                <h:outputLabel styleClass="label" for="company" value="#{msg.lblCompany}:"/>
                <h:message id="msgCompany" for="company" styleClass="errorMessage"/>
                <br/>
                <h:inputText styleClass="input" id="company" value="#{editUserMaintenance.account.company}"
                             required="true" requiredMessage="#{msg.msgValueNeeded}"
                             maxlength="200">
                    <f:validator validatorId="RequiredValidator"/>
                    <f:ajax event="blur" render="@this :logout:remaining msgCompany"/>
                </h:inputText>
            </p>
            <p>
                <h:outputLabel styleClass="label" for="customerType" value="#{msg.lblCustomerType}:"/>
                <h:message id="msgCustomerType" for="customerType" styleClass="errorMessage"/>
                <br/>
                <h:selectOneMenu styleClass="input" id="customerType" value="#{editUserMaintenance.account.customerTypeId}"
                                 required="true" requiredMessage="#{msg.lblChooseEntry}">
                    <f:selectItems value="#{sessionTools.customerTypeItems}"/>
                    <f:ajax event="change" render="@this :logout:remaining msgCustomerType lblIk ik"/>
                </h:selectOneMenu>
            </p>
            <p>
                <h:outputLabel styleClass="label" for="street" value="#{msg.lblStreet}:"/>
                <h:message id="msgStreet" for="street" styleClass="errorMessage"/>
                <br/>
                <h:inputText styleClass="input" id="street" value="#{editUserMaintenance.account.street}"
                             required="true" requiredMessage="#{msg.msgValueNeeded}" maxlength="50">
                    <f:validator validatorId="RequiredValidator"/>
                    <f:ajax event="blur" render="@this :logout:remaining msgStreet"/>
                </h:inputText>
            </p>
            <p>
                <h:outputLabel styleClass="label" for="zip" value="#{msg.lblPostalCode}:"/>
                <h:message id="msgZip" for="zip" styleClass="errorMessage"/>
                <br/>
                <h:inputText styleClass="input" id="zip" value="#{editUserMaintenance.account.postalCode}"
                             required="true" requiredMessage="#{msg.msgValueNeeded}" maxlength="10">
                    <f:validator validatorId="RequiredValidator"/>
                    <f:ajax event="blur" render="@this :logout:remaining msgZip"/>
                </h:inputText>
            </p>
            <p>
                <h:outputLabel styleClass="label" for="town" value="#{msg.lblTown}:"/>
                <h:message id="msgTown" for="town" styleClass="errorMessage"/>
                <br/>
                <h:inputText styleClass="input" id="town" value="#{editUserMaintenance.account.town}"
                             required="true" requiredMessage="#{msg.msgValueNeeded}" maxlength="50">
                    <f:validator validatorId="RequiredValidator"/>
                    <f:ajax event="blur" render="@this :logout:remaining msgTown"/>
                </h:inputText>
            </p>
            <p>
                <h:outputLabel styleClass="label" for="companyPhone" value="#{msg.lblPhone}:"/>
                <h:message id="msgCompanyPhone" for="companyPhone" styleClass="errorMessage"/>
                <br/>
                <h:inputText styleClass="input" id="companyPhone" value="#{editUserMaintenance.account.customerPhone}" required="false" maxlength="50">
                    <f:ajax event="blur" render="@this :logout:remaining msgCompanyPhone"/>
                </h:inputText>
            </p>
            <p>
                <h:outputLabel styleClass="label" for="companyFax" value="#{msg.lblFax}:"/>
                <h:message id="msgCompanyFax" for="companyFax" styleClass="errorMessage"/>
                <br/>
                <h:inputText styleClass="input" id="companyFax" value="#{editUserMaintenance.account.customerFax}" required="false" maxlength="50">
                    <f:ajax event="blur" render="@this :logout:remaining msgCompanyFax"/>
                </h:inputText>
            </p>
        </div>
        <br class="defloat"/>

        <h:form id="ilList">
            <pf:growl id="Box" />
            <h2>IK - Verwaltung</h2>
            <pf:dataTable editable="true"
                          editMode="cell"
                          id="iks"
                          var="accountIk"
                          widgetVar="accountIks"
                          value="#{editUserMaintenance.account.additionalIKs}"
                          emptyMessage="Keine IK's eingetragen"
                          tableStyle="width: auto">
                <pf:column class="colIcon">
                    <pf:commandLink rendered="#{editUserMaintenance.removeIkAllowed(accountIk.IK)}"
                                    action="#{editUserMaintenance.removeIK(accountIk)}"
                                    class="fa fa-trash" style="color: #e81919"
                                    update="iks"
                                    process="@this"/>
                </pf:column>
                <pf:column headerText="IK">
                    <pf:inputNumber id="ikInput"
                                    readonly="#{!editUserMaintenance.removeIkAllowed(accountIk.IK)}"
                                    validator="#{editUserMaintenance.isIKValid}"
                                    thousandSeparator=""
                                    minValue="000000000"
                                    maxValue="999999999"
                                    decimalPlaces="0"
                                    validatorMessage="Ungültige IK"
                                    required="True"
                                    value="#{accountIk.IK}">
                        <pf:ajax event="blur" update="customerName ikInputMessage" />
                    </pf:inputNumber>
                    <pf:message for="ikInput" id="ikInputMessage" />
                </pf:column>
                <pf:column headerText="Name">
                    <pf:outputLabel id="customerName" value="#{editUserMaintenance.getCustomerName(accountIk.IK)}" />
                </pf:column>
            </pf:dataTable>
            <br />
            <pf:commandButton value="Weitere IK hinzufügen" icon="fa fa-plus" process="@this" action="#{editUserMaintenance.addNewIK()}" oncomplete="PF('accountIks').addRow();"/>

            <h:outputText styleClass="warningText" value="#{msg.msgDataChanged}" rendered="#{editUserMaintenance.mofified}"/>
            <div class="toolBar">
                <pf:commandLink styleClass="bigButton" update="iks Box" action="#{editUserMaintenance.save}" value="#{msg.btnSave}"/>
            </div>
        </h:form>

    </ui:define>
</ui:composition>

