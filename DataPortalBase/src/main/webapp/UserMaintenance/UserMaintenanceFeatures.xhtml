<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                template="UserMaintenanceTemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:pf="http://primefaces.org/ui">
    <ui:define name="maintenanceContent">
        <h2>Bereits aktivierte Funktionen</h2>
        <pf:dataTable id="featureList"
                      value="#{editUserMaintenance.account.features}"
                      var="accountFeature"
                      tableStyle="width: auto"
                      draggableRows="true"
                      sortBy="#{accountFeature.sequence}"
                      emptyMessage="Keine Funktionen vorhanden"
                      rowIndexVar="">
            <pf:column>
                <pf:commandButton value="Entfernen"
                                  icon="fa fa-minus"
                                  process="@this"
                                  action="#{editUserMaintenance.removeAccountFeature(accountFeature)}"
                                  update="featureList :form:newFeatureList"
                                  rendered="#{accountFeature.allowedForRemove()}"
                                  style="background: none; background-color: #ff5b5b; color: #ffffff !important"/>

                <pf:outputLabel value="In Pr체fung"
                                rendered="#{!accountFeature.allowedForRemove()}"/>
            </pf:column>
            <pf:column headerText="Funktion">
                <pf:outputLabel value="#{accountFeature.feature.description}"/>
            </pf:column>
            <pf:column headerText="Erl채uterung">
                <pf:outputLabel value="#{accountFeature.feature.getDescriptionText()}"/>
            </pf:column>
        </pf:dataTable>

        <h2>Verf체gbare Funktionen</h2>
        <pf:dataTable id="newFeatureList"
                      value="#{editUserMaintenance.getAvailableFeatures()}"
                      var="feature"
                      tableStyle="width: auto"
                      emptyMessage="Keine neuen Funktionen vorhanden">
            <pf:column>
                <pf:commandButton value="Beantragen"
                                  icon="fa fa-plus"
                                  process="@this"
                                  action="#{editUserMaintenance.addFeature(feature)}"
                                  update=":form:featureList newFeatureList"
                                  style="background: none; background-color: #7aff8c"/>
            </pf:column>
            <pf:column headerText="Funktion">
                <pf:outputLabel value="#{feature.description}"/>
            </pf:column>
            <pf:column headerText="Erl채uterung">
                <pf:outputLabel value="#{feature.getDescriptionText()}"/>
            </pf:column>
        </pf:dataTable>

        <div class="toolBar">
            <pf:commandLink styleClass="bigButton"
                            update="@(.ui-message) Box featureList newFeatureList"
                            action="#{editUserMaintenance.saveFeatures}"
                            value="#{msg.btnSave}"/>
        </div>

    </ui:define>
</ui:composition>

