<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>

<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:inek="http://xmlns.jcp.org/jsf/composite/components/common"
                xmlns:jsf="http://xmlns.jcp.org/jsf">

    <f:validateBean validationGroups="org.inek.dataportal.calc.groupinterface.Seal, javax.validation.groups.Default">

        <inek:MultiIk value="#{editCalcBasicsAutopsy.calcBasics.ik}" 
                      ikList="#{editCalcBasicsAutopsy.iks}"
                      listener="#{editCalcBasicsAutopsy.ikChanged}" 
                      renderElement="cdaData"
                      readonly="#{editCalcBasicsAutopsy.readOnly}" 
                      isFixed="#{editCalcBasicsAutopsy.calcBasics.id gt 0 and editCalcBasicsAutopsy.calcBasics.ik gt 0}">
        </inek:MultiIk>

        <hr/>

        <div jsf:id="cdaData" jsf:rendered="#{editCalcBasicsAutopsy.calcBasics.ik gt 0}">

            <h5 class="blockHeader">Pathologie: Kosteninformationen</h5>

            <div class="inputPart">
                <h:outputLabel styleClass="label element37em"
                               value=""/>
                <h:outputLabel styleClass="label element08em"
                               value="vor Abgrenzung"/>
                <h:outputLabel styleClass="label"
                               value="nach Abgrenzung"/>
            </div>

            <div class="inputPart">
                <h:outputLabel styleClass="label element37em fakeRequired"
                               value="Anzahl Vollkräfte Ärztlicher Dienst"/>
                <inek:InputNumberWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.fullVigorMedicalBeforeAccrual}"/>
                <inek:InputNumberWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.fullVigorMedicalAfterAccrual}"/>
            </div>

            <div class="inputPart">
                <h:outputLabel styleClass="label element37em fakeRequired"
                               value="Kostenvolumen Ärztlicher Dienst"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.costVolumeMedicalBeforeAccrual}"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.costVolumeMedicalAfterAccrual}"/>
            </div>

            <div class="inputPart">
                <h:outputLabel styleClass="label element37em fakeRequired"
                               value="Anzahl Vollkräfte Sektionsgehilfen/Präparator etc."/>
                <inek:InputNumberWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.fullVigorOtherBeforeAccrual}"/>
                <inek:InputNumberWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.fullVigorOtherAfterAccrual}"/>
            </div>

            <div class="inputPart">
                <h:outputLabel styleClass="label element37em fakeRequired"
                               value="Kostenvolumen Sektionsgehilfen/Präparator etc."/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.costVolumeOtherBeforeAccrual}"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.costVolumeOtherAfterAccrual}"/>
            </div>

            <div class="inputPart">
                <h:outputLabel styleClass="label element37em fakeRequired"
                               value="Kostenvolumen medizinische Infrastruktur"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.costVolumeMedicalInfraBeforeAccrual}"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.costVolumeMedicalInfraAfterAccrual}"/>
            </div>

            <div class="inputPart">
                <h:outputLabel styleClass="label element37em fakeRequired"
                               value="Kostenvolumen nicht medizinische Infrastruktur"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.costVolumeNonMedicalInfraBeforeAccrual}"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.costVolumeNonMedicalInfraAfterAccrual}"/>
            </div>

            <h5 class="blockHeader">Rechtsmedizin: Kosteninformationen</h5>

            <inek:LabeledCheckbox label="Es ist eine eigenständige Kostenstelle Rechtsmedizin vorhanden"
                                  styleClassLabel="label element37em"
                                  renderElement="@form"
                                  readonly="#{editCalcBasicsAutopsy.calcBasics.hasExternalForensic}"
                                  value="#{editCalcBasicsAutopsy.calcBasics.hasCostCenterForensic}"/>

            <div class="inputPart" jsf:rendered="#{editCalcBasicsAutopsy.calcBasics.hasCostCenterForensic}">
                <h:outputLabel styleClass="label element37em fakeRequired"
                               value="Kostenvolumen Rechtsmedizin"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.costVolumeForensic}"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.costVolumeForensicAccural}"/>
            </div>

            <inek:LabeledCheckbox label="Die Rechtsmedizin wird vollständig extern erbracht"
                                  styleClassLabel="label element37em"
                                  renderElement="@form"
                                  readonly="#{editCalcBasicsAutopsy.calcBasics.hasCostCenterForensic}"
                                  value="#{editCalcBasicsAutopsy.calcBasics.hasExternalForensic}"
                                  />

            <h5 class="blockHeader">Pathologie: Leistungs- und Kosteninformationen</h5>

            <div class="inputPart">
                <h:outputLabel styleClass="label element37em fakeRequired"
                               value="Anzahl insgesamt durchgeführter klinischer Sektionen"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.totalAutopsys}"/>
            </div>

            <div class="inputPart">
                <h:outputLabel styleClass="label element37em fakeRequired"
                               value="davon: kalkulationsrelevante Anzahl"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.calcAutopsys}"/>
            </div>

            <div class="inputPart">
                Bitte im Folgenden nur ausfüllen, wenn in diesen Bereichen Leistungen erbracht wurden
            </div>

            <ui:repeat value="#{editCalcBasicsAutopsy.calcBasics.autopsyItems.stream()
                                .filter(i -> !editCalcBasicsAutopsy.calcBasics.hasCostCenterForensic and !editCalcBasicsAutopsy.calcBasics.hasExternalForensic 
                                or i.getAutopsyServiceText().getShowOnForensic()).toList()}"
                       var="item">

                <br/>
                <h:outputLabel value="#{item.autopsyServiceText.text}"
                               styleClass="blockHeader2"/>

                <div class="inputPart">
                    <h:outputLabel styleClass="label element37em"
                                   value="Anzahl Fälle"/>
                    <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                                 styleClassComponent="element08em"
                                                 value="#{item.countCases}"/>
                </div>

                <div class="inputPart">
                    <h:outputLabel styleClass="label element37em"
                                   value="hierfür abgegrenztes Kostenvolumen Ärztlicher Dienst der Pathologie"/>
                    <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                                 styleClassComponent="element08em"
                                                 value="#{item.costVolumeMedical}"/>
                </div>

                <div class="inputPart">
                    <h:outputLabel styleClass="label element37em"
                                   value="hierfür abgegrenztes Kostenvolumen übrige Personalkosten der Pathologie"/>
                    <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                                 styleClassComponent="element08em"
                                                 value="#{item.costVolumeOther}"/>
                </div>

                <div class="inputPart">
                    <h:outputLabel styleClass="label element37em"
                                   value="Kurzbeschreibung des durchgeführten Abgrenzungsverfahrens"/>
                    <inek:InputTextWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                               styleClassComponent="element100-37em"
                                               value="#{item.descriptionAccrual}"/>
                </div>

            </ui:repeat>

            <h5 class="blockHeader">Weitere Leistungsbereiche: Kosten- und Leistungsinformationen</h5>

            <div class="inputPart">
                <h:outputLabel styleClass="label element37em fakeRequired"
                               value="Kostenvolumen Kostenstellengruppe 10 (Labor) für klinische Sektionen"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.costVolumeLaboratoryBeforeAccrual}"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             required="true"
                                             value="#{editCalcBasicsAutopsy.calcBasics.costVolumeLaboratoryAfterAccrual}"/>
            </div>

            <div class="inputPart">
                <h:outputLabel styleClass="label element37em"
                               value="Anzahl Fälle mit Röntgenleistungen für klinische Sektionen"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             value="#{editCalcBasicsAutopsy.calcBasics.caseCountXRay}"/>
            </div>

            <div class="inputPart">
                <h:outputLabel styleClass="label element37em"
                               value="Kostenvolumen Kostenstellengruppe 9 (Radiologie) für klinische Sektionen"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             value="#{editCalcBasicsAutopsy.calcBasics.costVolumeXRayBeforeAccrual}"/>
                <inek:InputIntegerWithMessage readonly="#{editCalcBasicsAutopsy.readOnly}"
                                             styleClassComponent="element08em"
                                             value="#{editCalcBasicsAutopsy.calcBasics.costVolumeXRayAfterAccrual}"/>
            </div>

        </div>    
    </f:validateBean>            

</ui:composition>

