<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:pf="http://primefaces.org/ui">

    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="ikList"/>
        <cc:attribute name="addAction" required="true" method-signature="void action(java.lang.String)"/>        
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <div>
        <cc:implementation>

            <div>
                <pf:dataTable id="iks"
                              var="ik"
                              widgetVar="wIks"
                              value="#{cc.attrs.ikList}"
                              emptyMessage="Keine IK's eingetragen"
                              tableStyle="width: auto">
                    <pf:column class="colIcon">
                        <pf:commandLink rendered="true"
                                        action="#{cc.attrs.deleteIk(accountIk.IK)}"
                                        update="iks"
                                        process="@this">
                            <h:graphicImage alt="löschen" name="Icon/small/delete.png" title="Löschen" value=""/>
                        </pf:commandLink>
                    </pf:column>
                    <pf:column headerText="IK">

                        <pf:inputNumber id="ikInput"
                                        validator="#{customerFacade.isIKValid}"
                                        thousandSeparator=""
                                        decimalPlaces="0"
                                        validatorMessage="Ungültige IK"
                                        required="True"
                                        value="#{ik}" >

                            <pf:ajax event="blur" update="customerName ikInput_m" />
                        </pf:inputNumber>
                        <pf:message id="ikInput_m" for="ikInput" />
                    </pf:column>
                    <pf:column headerText="Name">
                        <pf:outputLabel id="customerName" value="#{customerFacade.getCustomerByIK(ik).name}" />
                    </pf:column>
                </pf:dataTable>
                <br />
                <div class="ui-g-8 ui-md-5">
                    <pf:commandButton value="Weitere IK hinzufügen" icon="fa fa-plus" process="@this" action="#{cc.attrs.addAction}" oncomplete="PF('wIks').addRow();"/>
                </div>
            </div>

        </cc:implementation>
    </div>
</html>