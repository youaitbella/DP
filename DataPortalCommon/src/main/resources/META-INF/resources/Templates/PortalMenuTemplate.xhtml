<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                template="/Templates/PortalTemplate.xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="userInfo">

        <c:if test="#{sessionController.loggedIn}">
            <h:form id="logout">
                <h:outputLabel styleClass="label" value="#{sessionController.user}"/>
                <h:outputLabel styleClass="light" value=" (#{msg.lblAutoLogout} "/>
                <h:outputText id="remaining" styleClass="light" value="#{sessionController.remainingTime}"/>
                <h:outputLabel styleClass="light" value=") "/>
                <h:commandLink styleClass="btnLogout" value="#{msg.btnLogout}" action="#{sessionController.logout}"/>
            </h:form>
        </c:if>
    </ui:define>

    <ui:define name="menuList">

        <c:if test="#{sessionController.loggedIn}">
            <li>
                <h:commandLink value="#{msg.btnLogout}" action="#{sessionController.logout}"/>
            </li>
        </c:if>

        <ui:repeat value="#{sessionController.topics}" var="topic">
            <li class="#{topic.active ? 'activemenu' : 'menu'}">
                <h:commandLink action="#{sessionController.navigate(topic.outcome)}" value="#{topic.title}" immediate="true">
                    <h:panelGroup rendered="#{documentList.renderNumDocs(topic.title)}" styleClass="notifier">
                        <h:outputLabel id="docs" styleClass="notifierNum" value="#{documentList.getNumberOfUnreadDocs(topic.title)}" />
                    </h:panelGroup>
                </h:commandLink>
            </li>
        </ui:repeat>

        <ui:insert name="navItems"></ui:insert>

        <c:if test="#{sessionController.loggedIn}">
            <li class="#{empty(sessionController.currentTopic) ? 'activemenu' : 'menu'}">
                <h:commandLink value="#{msg.lblSummary}" action="#{sessionController.navigate(sessionTools.pages.MainApp)}"/>
            </li>
        </c:if>

    </ui:define>


    <ui:define name="mainContent">
        <ui:insert name="content">Content</ui:insert>
    </ui:define>

    <ui:define name="bottom">
    </ui:define>


</ui:composition>
