<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>

<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/WEB-INF/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:pf="http://primefaces.org/ui">


    <ui:define name="title">Mitteilung gem. § 5 PpUGV</ui:define>

    <ui:define name="content">

        <style>
            .card {
                max-width: 1600px !important;
            }
        </style>

        <script type="text/javascript">
            function start() {
                PF('dialogProcess').show();
            }

            function stop() {
                PF('dialogProcess').hide();
            }
        </script>

        <pf:dialog widgetVar="dialogProcess"
                   header="Exceldatei wird generiert"
                   modal="true"
                   closable="false"
                   resizable="false"
                   height="80px">
            <div style="text-align: center; width: 100%;">
                <div class="inekLoader" style="text-align: center;">
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
            </div>
        </pf:dialog>

        <h:form id="form">
            <div style="margin-top: 10px;">
                <pf:commandButton value="Zurück zur Übersicht"
                                  icon="fa fa-arrow-left"
                                  action="#{sessionController.navigate(sessionTools.pages.CareDeptSummary)}"
                                  immediate="true" />

                <pf:button target="blank"
                           value="Hilfe?"
                           icon="fa fa-info"
                           href="https://www.g-drg.de/Umsetzung_der_Verordnung_zur_Festlegung_von_Pflegepersonaluntergrenzen_in_pflegesensitiven_Bereichen_in_Krankenhaeusern_PpUGV/FAQ" />
            </div>

            <ui:include src="deptStation.xhtml" />

            <div class="ui-g">
                <div class="card">
                    <div class="ui-g-12">

                        <pf:commandButton value="Datensatz ändern"
                                          action="#{deptEdit.change()}"
                                          rendered="#{deptEdit.changeAllowed()}"
                                          style="margin-left: 10px;"
                                          update="@(.ui-message) @form" />

                        <pf:commandButton value="Meldung exportieren (Excel)"
                                          ajax="false"
                                          rendered="#{deptEdit.excelExportAllowed()}"
                                          style="margin-left: 10px;"
                                          onclick="PrimeFaces.monitorDownload(start, stop);"
                                          icon="ui-icon-arrowthick-1-s">
                            <pf:fileDownload value="#{deptEdit.exportAsExcel()}" />
                        </pf:commandButton>

                        <pf:commandButton value="Speichern ohne Senden"
                                          action="#{deptEdit.save()}"
                                          rendered="#{!deptEdit.isReadOnly}"
                                          style="margin-left: 10px;"
                                          update="@(.ui-message) @form" />

                        <pf:commandButton value="Meldung abschließend ans InEK senden"
                                          action="#{deptEdit.send()}"
                                          rendered="#{!deptEdit.isReadOnly and deptEdit.sendAllowed()}"
                                          styleClass="green-button"
                                          style="margin-left: 10px;"
                                          icon="fa fa-arrow-right"
                                          iconPos="right"
                                          update="@(.ui-message) @form" />

                    </div>
                </div>
            </div>
        </h:form>

    </ui:define>

</ui:composition>

