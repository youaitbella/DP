<?xml version='1.0' encoding='UTF-8' ?>

<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:pf="http://primefaces.org/ui"
                xmlns:inekIk="http://xmlns.jcp.org/jsf/composite/components/Other"
                xmlns:inekInput="http://xmlns.jcp.org/jsf/composite/components/Input"
                xmlns:inekIcon="http://xmlns.jcp.org/jsf/composite/components/Icons"
                xmlns:jsf="http://xmlns.jcp.org/jsf" xmlns:f="http://xmlns.jcp.org/jsf/core">

    <style type="text/css">
        .ui-tooltip {
            max-width: 300px !important;
            white-space: pre-wrap !important;
        }
    </style>

    <div class="ui-g">
        <div class="card">
            <div class="ui-g-12">
                <inekIk:MultiIk_V2 label="#{msg.lblIkShort}"
                                   required="true"
                                   value="#{deptEdit.deptBaseInformation.ik}"
                                   ikList="#{deptEdit.validIks}"
                                   readonly="#{deptEdit.isReadOnly}"
                                   listener="#{deptEdit.ikChanged()}"
                                   isFixed="#{deptEdit.deptBaseInformation.id gt 0 or deptEdit.deptBaseInformation.status.id gt 0}"
                                   updateElement="form"/>

            </div>

            <div class="ui-g-12" jsf:rendered="#{deptEdit.deptBaseInformation.year eq 2017}">
                <h1>Umsetzung der Verordnung zur Festlegung von Pflegepersonaluntergrenzen in pflegesensitiven Bereichen in Krankenhäusern (PpUGV)</h1>
                <div style="text-align: justify; border: 1px solid #ffa727; padding: 10px;">
                    <br/>
                    Die nach § 5 PpUGV geforderten Angaben Ihres Krankenhauses können Sie in diesem Bereich des InEK-Datenportals eintragen und an das InEK übermitteln. Zur Vereinfachung der Dateneingabe haben wir Ihnen die Eingabefelder bereits mit den in unserem Schreiben übermittelten, identifizierten pflegesensitiven Bereiche Ihres Krankenhauses vor befüllt. Lediglich die Informationen nach § 5 Abs. 3 PpUGV, die aus den §-21-Datensätzen nicht abgeleitet werden können, sind von Ihnen zu ergänzen. Sie können Ihre Eingaben jederzeit speichern ohne diese direkt an das InEK zu übermitteln. Über die Speicherung der Daten erhalten Sie eine Informationsmail. So können Sie schrittweise arbeiten und erst nach Beendigung der Eingabe die Daten an das InEK übermitteln (Button „Meldung abschließend ans InEK senden“). Nach erfolgreicher Übermittlung erhalten Sie eine Bestätigungsmail über den erfolgreichen Dateneingang im InEK.
                    <br/>
                    <br/>
                    Nach erfolgreicher Übermittlung an das InEK können Sie die übermittelten Daten in eine Excel-Tabelle exportieren und an die örtlichen Vertragsparteien nach § 11 KHEntgG weiterleiten (§ 5 Abs. 3 PpUGV). Eine erneute Erfassung der Daten zur Weiterleitung an die örtlichen Vertragsparteien ist also nicht erforderlich.
                    <br/>
                    <br/>
                    Bitte geben Sie die Namen der Fachabteilungen und Stationen möglichst nachvollziehbar ein. Verwenden Sie neben ggf. intern verwendeten Kurzbezeichnung („Station G1“) auch Klartexte zur besseren Nachvollziehbarkeit („Station G1 – Innere Medizin, Schwerpunkt Geriatrie“).
                    <br/>
                    <br/>
                    Bitte geben Sie in der Spalte „Fachabteilung“ den in Ihrem Krankenhaus verwendeten Namen der Fachabteilung an. Nach § 5 Abs. 3 PpUGV sind Angaben für sämtliche zu diesen Fachabteilungen gehörenden Stationen einzutragen. Wenn Ihr Krankenhaus über mehrere Standorte verfügt, sind die Angaben Standortbezogen vorzunehmen. Zu jedem Eintrag ist zunächst nur eine Datenzeile auf Stationsebene eingeblendet. Mit dem +-Button können Sie die Anzahl der einzugebenden Zeilen bedarfsweise erhöhen.
                    <br/>
                    <br/>
                    Bei einem Fehleintrag können Sie die Zeile mit dem „Papierkorb“-Button wieder löschen.
                    <br/>
                    <br/>
                    Bei Fragen konsultieren Sie bitte den Text der Rechtsverordnung sowie die auf unserer Internetseite bereitgestellte
                    <a href="https://www.g-drg.de/Pflegepersonaluntergrenzen/Umsetzung_der_Verordnung_zur_Festlegung_von_Pflegepersonaluntergrenzen_in_pflegesensitiven_Bereichen_in_Krankenhaeusern_PpUGV/FAQ"
                       target="_blank">FAQ-Liste</a>. Bei darüber hinaus gehenden Fragestellungen können Sie sich gerne an das InEK wenden (per E-Mail:
                    <a href="mailto:PPUGV-Umsetzung@inek-drg.de">PPUGV-Umsetzung@inek-drg.de</a> bzw. per Telefon: (02241) 93 82 500).
                </div>

                <div style="text-align: justify; border: 1px solid #ffa727; padding: 10px;">
                    <br/>
                    <b>Ausfüllhinweise:</b>
                    <p>Alle Angaben beziehen sich auf die Situation in Ihrem Krankenhaus im Datenjahr 2017. Bei Änderungen im Sinne des § 5 Abs. 4 PpUGV (ersatzloser Wegfall, Umbenennung, strukturelle Veränderungen) geben Sie diese bitte im entsprechenden Bereich am unteren Ende des Datenportals an.</p>
                    <p>Wenn in Ihrem Krankenhaus die Fachabteilung einen Namen verwendet, der von der Namensgebung im Schlüsselverzeichnis zur Datenübermittlung nach § 301 SGB V abweicht, tragen Sie diesen Namen bitte in der Spalte "Fachabteilungsnamen" ein.</p>
                    <p>Bitte geben Sie die Namen aller Stationen an, die dieser Fachabteilung zugeordnet sind. Bitte verwenden Sie unbedingt einen neben einer von Ihnen verwendeten Kurzbezeichnung auch einen Klarnamen. Verfügt Ihr Krankenhaus über mehrere Standorte, sind die Angaben standortdifferenziert vorzunehmen.</p>
                </div>

            </div>


            <div class="ui-g-12" jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}">
                <h1>Umsetzung der Verordnung zur Festlegung von Pflegepersonaluntergrenzen in pflegesensitiven Bereichen in Krankenhäusern (PpUGV)</h1>
                <div style="text-align: justify; border: 1px solid #ffa727; padding: 10px;">
                    <br/>
                    Die gem. § 5 PpUGV zu übermittelnden Angaben Ihres Krankenhauses können Sie in diesem Bereich des InEK-Datenportals eintragen und an das InEK übermitteln. Zur Vereinfachung der Dateneingabe haben wir Ihnen die Eingabefelder bereits mit den in unserem Anschreiben genannten für Ihr Krankenhaus ermittelten pflegesensitiven Bereichen Ihres Krankenhauses vorbefüllt. Wir bitten Sie freundlich, die voreingegebenen Daten zu prüfen. Sie können gemäß § 5 Abs. 2 Satz 1 PpUGV bis zum 30.11.2019 Einwände gegen das ermittelte Auswertungsergebnis des InEK erheben. Nähere Informationen hierzu entnehmen Sie bitte dem Anschreiben. Informationen nach § 5 Abs. 3 PpUGV, die aus den §-21-Datensätzen nicht abgeleitet werden können, sind von Ihnen zu ergänzen. Sie können Ihre Eingaben jederzeit speichern ohne diese direkt an das InEK zu übermitteln. Über die Speicherung der Daten werden Sie per E-Mail informiert. So können Sie schrittweise arbeiten und erst nach Beendigung der Eingabe die Daten an das InEK übermitteln (Button „Meldung abschließend ans InEK senden“). Nach erfolgreicher Übermittlung erhalten Sie eine Bestätigung per E-Mail über den erfolgreichen Dateneingang im InEK.
                    <br/>
                    <br/>
                    Nach erfolgreicher Übermittlung an das InEK können Sie die übermittelten Daten in eine Excel-Tabelle exportieren und an die örtlichen Vertragsparteien nach § 11 KHEntgG weiterleiten (gem. § 5 Abs. 3 PpUGV). Eine erneute Erfassung der Daten zur Weiterleitung an die örtlichen Vertragsparteien ist also nicht erforderlich.
                    <br/>
                    <br/>
                    Zu jedem Eintrag ist zunächst nur eine Datenzeile auf Stationsebene eingeblendet. Mit dem "+"-Button können Sie die Anzahl der einzugebenden Zeilen bedarfsweise erhöhen.
                    <br/>
                    <br/>
                    Bei einem Fehleintrag können Sie die Zeile mit dem „Papierkorb“-Button wieder löschen.
                    <br/>
                    <br/>
                    Bei Fragen konsultieren Sie bitte zunächst den Text der Rechtsverordnung sowie die auf unserer Internetseite bereitgestellte
                    <a href="https://www.g-drg.de/Pflegepersonaluntergrenzen_2020/Umsetzung_der_Verordnung_zur_Festlegung_von_Pflegepersonaluntergrenzen_in_pflegesensitiven_Bereichen_in_Krankenhaeusern_PpUGV_fuer_das_Jahr_2020/FAQ_PpUGV_2020"
                       target="_blank">FAQ-Liste</a>. Bei darüber hinaus gehenden Fragestellungen können Sie sich gerne an das PpUG-Betreungsteam im InEK wenden (per E-Mail:
                    <a href="mailto:PPUGV-Umsetzung@inek-drg.de">PPUGV-Umsetzung@inek-drg.de</a> bzw. per Telefon: (02241) 93 82 500).
                </div>

                <div style="text-align: justify; border: 10px solid #ffa727; padding: 10px;">
                    <br/>
                    <b>Alle Angaben beziehen sich auf die Situation in Ihrem Krankenhaus im Datenjahr 2018. </b>
                    <p>Bei Änderungen im Sinne von § 5 Abs. 4 PpUGV (ersatzloser Wegfall, Umbenennung, strukturelle Veränderungen) geben Sie diese bitte im Bereich "Umbenennung oder strukturelle Veränderungen (§ 5 Abs. 4 PpUGV)" an, nachdem Sie die Strukturdaten für das Jahr 2018 vollständig angegeben haben.</p>
                </div>

            </div>

            <div style="margin-top: 20px;" class="ui-g-12" jsf:rendered="#{deptEdit.getDeptsByArea(1).size() gt 0}">
                <h1 jsf:rendered="#{deptEdit.deptBaseInformation.year eq 2017}">Angaben zu § 3 Abs. 3 Nr. 1 PpUGV (ausgewiesene Fachabteilung)</h1>
                <h1 jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}">#{deptEdit.getDeptAreaText(1)}</h1>

                <div jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                     style="text-align: justify; border: 1px solid #ffa727; padding: 10px;">
                    Es sind die vom Krankenhaus verwendeten Namen der Fachabteilung und sämtliche zu dieser Fachabteilung gehörende Stationen standortbezogen mit zugehöriger Bettenanzahl einzutragen.
                </div>

                <pf:repeat value="#{deptEdit.getDeptsByArea(1)}" var="dept">
                    <h3>Stationsangaben für den pflegesensitiven Bereich #{dept.sensitiveArea}: Fachabteilung #{dept.deptNumber} #{dept.deptName}#{dept.location ne '' ? ', ' += dept.locationForDisplay : ''}</h3>
                    <div class="inekInfoBox" jsf:rendered="#{!dept.required}">
                        Keine Angabe erforderlich
                    </div>

                    <pf:outputLabel rendered="#{dept.seeDeptAreaId gt 0}"
                                    value="Siehe #{deptEdit.getDeptAreaText(dept.seeDeptAreaId)}"/>
                    <pf:dataTable id="depTable1"
                                  value="#{dept.initDeptWards}"
                                  rendered="#{dept.seeDeptAreaId eq 0}"
                                  emptyMessage="Keine Einträge vorhanden"
                                  var="station">
                        <pf:column class="colIcon" style="width: 20px;" rendered="#{!deptEdit.isReadOnly}">
                            <inekIcon:DeleteIcon deleteFunction="#{deptEdit.deleteStationFromDept(dept, station)}"
                                                 updateElement="form"/>
                        </pf:column>
                        <pf:column id="colFabName1">

                            <f:facet name="header">
                                <h:outputText value="Fachabteilungsname"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnDeptName}"
                                            for="colFabName1"/>
                            </f:facet>

                            <inekInput:InputText value="#{station.deptName}"
                                                 require="true"
                                                 Style="width: 100%;"
                                                 requiredMessage="Bitte geben Sie den Fachabteilungsnamen aus Ihrem Haus ein"
                                                 readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column id="colWardName1">

                            <f:facet name="header">
                                <h:outputText value="Stationsbezeichnung"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnWardName}"
                                            for="colWardName1"/>
                            </f:facet>

                            <pf:selectOneMenu value="#{station.wardName}"
                                              id="stationName1"
                                              effect="fold"
                                              style="width: 95%;"
                                              required="true"
                                              requiredMessage="Bitte geben Sie einen aussagekräftigen Stationsnamen an"
                                              disabled="#{deptEdit.isReadOnly}"
                                              editable="true">
                                <f:selectItems value="#{deptEdit.stationPrefillNames}"/>
                                <pf:ajax event="change" update=":form:aggregatedtTable"/>
                            </pf:selectOneMenu>
                            <pf:message id="stationName1_message" for="stationName1"/>
                        </pf:column>
                        <pf:column id="colP21Location1" style="width: 100px;">

                            <f:facet name="header">
                                <h:outputText
                                        value="Standort#{deptEdit.deptBaseInformation.year ge 2018 ?  ' nach § 21 KHEntgG' : ''}"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnLocationP21}"
                                            for="colP21Location1"/>
                            </f:facet>

                            <inekInput:InputNumberValidator value="#{station.locationCodeP21}"
                                                            validatorFunction="#{deptEdit.isP21LocationCodeValid}"
                                                            validatorMessage="Ungültiger Standort nach § 21 KHEntgG für diese IK"
                                                            Style="width: 100%;"
                                                            renderElement=":form:aggregatedtTable"
                                                            rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                                            readonly="#{deptEdit.isReadOnly}"/>
                            <pf:inputText value="#{station.location2017}"
                                          rendered="#{deptEdit.deptBaseInformation.year eq 2017}"
                                          readonly="true"/>
                        </pf:column>
                        <pf:column id="colVz1" style="width: 100px;"
                                   rendered="#{deptEdit.deptBaseInformation.year ge 2018}">

                            <f:facet name="header">
                                <h:outputText value="Standortnummer nach § 293 Abs. 6 SGB V (77xxxx000)"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnLocationVz}"
                                            for="colVz1"/>
                            </f:facet>

                            <inekInput:InputNumberValidator value="#{station.locationCodeVz}"
                                                            Style="width: 100%;"
                                                            validatorFunction="#{deptEdit.isVZLocationCodeValid}"
                                                            validatorMessage="Ungültiger Standort für dieses IK"
                                                            thousendSeperator=""
                                                            renderElement=":form:aggregatedtTable"
                                                            readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>

                        <pf:column id="colBed1" style="width: 100px;"
                                   rendered="#{deptEdit.deptBaseInformation.year ge 2018}">

                            <f:facet name="header">
                                <h:outputText value="Bettenanzahl der Station"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnBeds}"
                                            for="colBed1"/>
                            </f:facet>

                            <inekInput:InputNumber value="#{station.bedCount}"
                                                   Style="width: 100%;"
                                                   renderElement=":form:aggregatedtTable"
                                                   minValue="1"
                                                   maxValue="999"
                                                   readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                    </pf:dataTable>

                    <pf:commandButton value="Station hinzufügen"
                                      actionListener="#{deptEdit.addNewStation(dept)}"
                                      process="@this"
                                      immediate="false"
                                      rendered="#{!deptEdit.isReadOnly and dept.seeDeptAreaId eq 0}"
                                      style="margin-top: 10px;"
                                      icon="fa fa-plus"
                                      update="depTable1"/>

                </pf:repeat>

            </div>

            <br/>

            <div style="margin-top: 20px;" class="ui-g-12" jsf:rendered="#{deptEdit.getDeptsByArea(2).size() gt 0}">

                <h1 jsf:rendered="#{deptEdit.deptBaseInformation.year eq 2017}">Angaben zu § 3 Abs. 3 Nr. 2 PpUGV (Indikatoren - DRGs)</h1>
                <h1 jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}">#{deptEdit.getDeptAreaText(2)}</h1>

                <div jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                     style="text-align: justify; border: 1px solid #ffa727; padding: 10px;">
                    Es sind die vom Krankenhaus verwendeten Namen der Fachabteilung und sämtliche zu dieser Fachabteilung gehörende Stationen standortbezogen mit zugehöriger Bettenanzahl einzutragen.
                </div>

                <pf:repeat value="#{deptEdit.getDeptsByArea(2)}" var="dept">
                    <h3>Stationsangaben für den pflegesensitiven Bereich #{dept.sensitiveArea}: Fachabteilung #{dept.deptNumber} #{dept.deptName}#{dept.location ne '' ? ', ' += dept.locationForDisplay : ''}</h3>
                    <div class="inekInfoBox" jsf:rendered="#{!dept.required}">
                        Keine Angabe erforderlich
                    </div>

                    <pf:outputLabel rendered="#{dept.seeDeptAreaId gt 0}"
                                    value="Siehe #{deptEdit.getDeptAreaText(dept.seeDeptAreaId)}"/>
                    <pf:dataTable id="depTable2"
                                  value="#{dept.initDeptWards}"
                                  rendered="#{dept.seeDeptAreaId eq 0}"
                                  emptyMessage="Keine Einträge vorhanden"
                                  var="station">
                        <pf:column style="width: 20px;" rendered="#{!deptEdit.isReadOnly}">
                            <inekIcon:DeleteIcon deleteFunction="#{deptEdit.deleteStationFromDept(dept, station)}"
                                                 updateElement="form"/>
                        </pf:column>
                        <pf:column id="colFabName2">
                            <f:facet name="header">
                                <h:outputText value="Fachabteilungsname"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnDeptName}"
                                            for="colFabName2"/>
                            </f:facet>

                            <inekInput:InputText value="#{station.deptName}"
                                                 require="true"
                                                 Style="width: 100%;"
                                                 requiredMessage="Bitte geben Sie den Fachabteilungsnamen aus Ihrem Haus ein"
                                                 readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column id="colWardName2">

                            <f:facet name="header">
                                <h:outputText value="Stationsbezeichnung"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnWardName}"
                                            for="colWardName2"/>
                            </f:facet>

                            <pf:selectOneMenu value="#{station.wardName}"
                                              id="stationName2"
                                              effect="fold"
                                              style="width: 95%;"
                                              required="true"
                                              requiredMessage="Bitte geben Sie einen aussagekräftigen Stationsnamen an"
                                              disabled="#{deptEdit.isReadOnly}"
                                              editable="true">
                                <f:selectItems value="#{deptEdit.stationPrefillNames}"/>
                                <pf:ajax event="change" update=":form:aggregatedtTable"/>
                            </pf:selectOneMenu>
                            <pf:message id="stationName2_message" for="stationName2"/>
                        </pf:column>
                        <pf:column id="colP21Location2" style="width: 100px;">

                            <f:facet name="header">
                                <h:outputText
                                        value="Standort#{deptEdit.deptBaseInformation.year ge 2018 ?  ' nach § 21 KHEntgG' : ''}"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnLocationP21}"
                                            for="colP21Location2"/>
                            </f:facet>

                            <inekInput:InputNumberValidator value="#{station.locationCodeP21}"
                                                            validatorFunction="#{deptEdit.isP21LocationCodeValid}"
                                                            validatorMessage="Ungültiger Standort nach § 21 KHEntgG für diese IK"
                                                            Style="width: 100%;"
                                                            renderElement=":form:aggregatedtTable"
                                                            rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                                            readonly="#{deptEdit.isReadOnly}"/>
                            <pf:inputText value="#{station.location2017}"
                                          rendered="#{deptEdit.deptBaseInformation.year eq 2017}"
                                          readonly="true"/>
                        </pf:column>
                        <pf:column id="colVz2" style="width: 100px;"
                                   rendered="#{deptEdit.deptBaseInformation.year ge 2018}">

                            <f:facet name="header">
                                <h:outputText value="Standortnummer nach § 293 Abs. 6 SGB V (77xxxx000)"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnLocationVz}"
                                            for="colVz2"/>
                            </f:facet>

                            <inekInput:InputNumberValidator value="#{station.locationCodeVz}"
                                                            Style="width: 100%;"
                                                            validatorFunction="#{deptEdit.isVZLocationCodeValid}"
                                                            validatorMessage="Ungültiger Standort für dieses IK"
                                                            thousendSeperator=""
                                                            renderElement=":form:aggregatedtTable"
                                                            readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column id="colBed2" style="width: 100px;"
                                   rendered="#{deptEdit.deptBaseInformation.year ge 2018}">

                            <f:facet name="header">
                                <h:outputText value="Bettenanzahl der Station"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnBeds}"
                                            for="colBed2"/>
                            </f:facet>

                            <inekInput:InputNumber value="#{station.bedCount}"
                                                   Style="width: 100%;"
                                                   minValue="1"
                                                   maxValue="999"
                                                   renderElement=":form:aggregatedtTable"
                                                   readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                    </pf:dataTable>

                    <pf:commandButton value="Station hinzufügen"
                                      actionListener="#{deptEdit.addNewStation(dept)}"
                                      process="@this"
                                      immediate="false"
                                      rendered="#{!deptEdit.isReadOnly and dept.seeDeptAreaId eq 0}"
                                      style="margin-top: 10px;"
                                      icon="fa fa-plus"
                                      update="depTable2"/>
                </pf:repeat>

            </div>

            <br/>

            <div style="margin-top: 20px;" class="ui-g-12" jsf:rendered="#{deptEdit.getDeptsByArea(4).size() gt 0}">

                <h1>#{deptEdit.getDeptAreaText(4)}</h1>

                <div jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                     style="text-align: justify; border: 1px solid #ffa727; padding: 10px;">
                    Es sind die vom Krankenhaus verwendeten Namen der Fachabteilung und sämtliche zu dieser Fachabteilung gehörende Stationen standortbezogen mit zugehöriger Bettenanzahl einzutragen.
                </div>
                <pf:repeat value="#{deptEdit.getDeptsByArea(4)}" var="dept">
                    <h3>Stationsangaben für den pflegesensitiven Bereich #{dept.sensitiveArea}: Fachabteilung #{dept.deptNumber} #{dept.deptName}#{dept.location ne '' ? ', ' += dept.locationForDisplay : ''}</h3>
                    <div class="inekInfoBox" jsf:rendered="#{!dept.required}">
                        Keine Angabe erforderlich
                    </div>

                    <pf:outputLabel rendered="#{dept.seeDeptAreaId gt 0}"
                                    value="Siehe #{deptEdit.getDeptAreaText(dept.seeDeptAreaId)}"/>
                    <pf:dataTable id="depTable4"
                                  value="#{dept.initDeptWards}"
                                  rendered="#{dept.seeDeptAreaId eq 0}"
                                  emptyMessage="Keine Einträge vorhanden"
                                  var="station">
                        <pf:column class="colIcon" style="width: 20px;" rendered="#{!deptEdit.isReadOnly}">
                            <inekIcon:DeleteIcon deleteFunction="#{deptEdit.deleteStationFromDept(dept, station)}"
                                                 updateElement="form"/>
                        </pf:column>

                        <ui:remove>
                            <pf:column id="colFab4" style="width: 120px;">

                                <f:facet name="header">
                                    <h:outputText value="Fachabteilungsnr."/>
                                    <i class="fa fa-question-circle"
                                       jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                    <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                                value="#{msg.careColumnFab}"
                                                for="colFab4"/>
                                </f:facet>
                                <inekInput:InputTextValidator value="#{station.fab}"
                                                              Style="width: 100%;"
                                                              validatorFunction="#{deptEdit.isFabCodeValid}"
                                                              validatorMessage="Ungültige FAB"
                                                              maxlength="4"
                                                              readonly="#{deptEdit.isReadOnly}"/>
                            </pf:column>
                        </ui:remove>

                        <pf:column id="colFabName4">
                            <f:facet name="header">
                                <h:outputText value="Fachabteilungsname"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnDeptName}"
                                            for="colFabName4"/>
                            </f:facet>
                            <inekInput:InputText value="#{station.deptName}"
                                                 require="true"
                                                 Style="width: 100%;"
                                                 requiredMessage="Bitte geben Sie den Fachabteilungsnamen aus Ihrem Haus ein"
                                                 readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column id="colWardName4">

                            <f:facet name="header">
                                <h:outputText value="Stationsbezeichnung"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnWardName}"
                                            for="colWardName4"/>
                            </f:facet>

                            <pf:selectOneMenu value="#{station.wardName}"
                                              id="stationName4"
                                              effect="fold"
                                              style="width: 95%;"
                                              required="true"
                                              requiredMessage="Bitte geben Sie einen aussagekräftigen Stationsnamen an"
                                              disabled="#{deptEdit.isReadOnly}"
                                              editable="true">
                                <f:selectItems value="#{deptEdit.stationPrefillNames}"/>
                                <pf:ajax event="change" update=":form:aggregatedtTable"/>
                            </pf:selectOneMenu>
                            <pf:message id="stationName4_message" for="stationName4"/>
                        </pf:column>
                        <pf:column id="colP21Location4" style="width: 100px;">

                            <f:facet name="header">
                                <h:outputText
                                        value="Standort#{deptEdit.deptBaseInformation.year ge 2018 ?  ' nach § 21 KHEntgG' : ''}"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnLocationP21}"
                                            for="colP21Location4"/>
                            </f:facet>

                            <inekInput:InputNumberValidator value="#{station.locationCodeP21}"
                                                            validatorFunction="#{deptEdit.isP21LocationCodeValid}"
                                                            validatorMessage="Ungültiger Standort nach § 21 KHEntgG für diese IK"
                                                            Style="width: 100%;"
                                                            renderElement=":form:aggregatedtTable"
                                                            rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                                            readonly="#{deptEdit.isReadOnly}"/>
                            <pf:inputText value="#{station.location2017}"
                                          rendered="#{deptEdit.deptBaseInformation.year eq 2017}"
                                          readonly="true"/>
                        </pf:column>
                        <pf:column id="colVz4" style="width: 100px;"
                                   rendered="#{deptEdit.deptBaseInformation.year ge 2018}">

                            <f:facet name="header">
                                <h:outputText value="Standortnummer nach § 293 Abs. 6 SGB V (77xxxx000)"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnLocationVz}"
                                            for="colVz4"/>
                            </f:facet>

                            <inekInput:InputNumberValidator value="#{station.locationCodeVz}"
                                                            Style="width: 100%;"
                                                            validatorFunction="#{deptEdit.isVZLocationCodeValid}"
                                                            validatorMessage="Ungültiger Standort für dieses IK"
                                                            thousendSeperator=""
                                                            renderElement=":form:aggregatedtTable"
                                                            readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column id="colBed4" style="width: 100px;"
                                   rendered="#{deptEdit.deptBaseInformation.year ge 2018}">

                            <f:facet name="header">
                                <h:outputText value="Bettenanzahl der Station"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnBeds}"
                                            for="colBed4"/>
                            </f:facet>

                            <inekInput:InputNumber value="#{station.bedCount}"
                                                   Style="width: 100%;"
                                                   minValue="1"
                                                   maxValue="999"
                                                   renderElement=":form:aggregatedtTable"
                                                   readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                    </pf:dataTable>

                    <pf:commandButton value="Station hinzufügen"
                                      actionListener="#{deptEdit.addNewStation(dept)}"
                                      process="@this"
                                      immediate="false"
                                      rendered="#{!deptEdit.isReadOnly and dept.seeDeptAreaId eq 0}"
                                      style="margin-top: 10px;"
                                      icon="fa fa-plus"
                                      update="depTable4"/>
                </pf:repeat>
            </div>

            <br/>

            <div style="margin-top: 20px;" class="ui-g-12" jsf:rendered="#{deptEdit.getDeptsByArea(5).size() gt 0}">

                <h1>#{deptEdit.getDeptAreaText(5)}</h1>

                <div jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                     style="text-align: justify; border: 1px solid #ffa727; padding: 10px;">
                    Für den pflegesensitiven Bereich "Neurologische Frührehabilitation" sind Angaben für sämtliche Stationen, auf denen die Leistungen in den jeweiligen Indikatoren-DRGs erbracht worden sind, standortbezogen mit zugehöriger Bettenanzahl einzutragen.
                </div>

                <pf:repeat value="#{deptEdit.getDeptsByArea(5)}" var="dept">
                    <h3>Stationsangaben für den pflegesensitiven Bereich #{dept.sensitiveArea}#{dept.location ne '' ? ', ' += dept.locationForDisplay : ''}</h3>
                    <div class="inekInfoBox" jsf:rendered="#{!dept.required}">
                        Keine Angabe erforderlich
                    </div>

                    <pf:outputLabel rendered="#{dept.seeDeptAreaId gt 0}"
                                    value="Siehe #{deptEdit.getDeptAreaText(dept.seeDeptAreaId)}"/>
                    <pf:dataTable id="depTable5"
                                  value="#{dept.initDeptWards}"
                                  rendered="#{dept.seeDeptAreaId eq 0}"
                                  emptyMessage="Keine Einträge vorhanden"
                                  var="station">
                        <pf:column class="colIcon" style="width: 20px;" rendered="#{!deptEdit.isReadOnly}">
                            <inekIcon:DeleteIcon deleteFunction="#{deptEdit.deleteStationFromDept(dept, station)}"
                                                 updateElement="form"/>
                        </pf:column>
                        <pf:column id="colFab5" style="width: 120px;">

                            <f:facet name="header">
                                <h:outputText value="Fachabteilungsnr."/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnFab}"
                                            for="colFab5"/>
                            </f:facet>
                            <inekInput:InputTextValidator value="#{station.fab}"
                                                          Style="width: 100%;"
                                                          validatorFunction="#{deptEdit.isFabCodeValid}"
                                                          validatorMessage="Ungültige FAB"
                                                          maxlength="4"
                                                          readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column id="colFabName5">
                            <f:facet name="header">
                                <h:outputText value="Fachabteilungsname"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnDeptName}"
                                            for="colFabName5"/>
                            </f:facet>
                            <inekInput:InputText value="#{station.deptName}"
                                                 require="true"
                                                 Style="width: 100%;"
                                                 requiredMessage="Bitte geben Sie den Fachabteilungsnamen aus Ihrem Haus ein"
                                                 readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column id="colWardName5">

                            <f:facet name="header">
                                <h:outputText value="Stationsbezeichnung"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnWardName}"
                                            for="colWardName5"/>
                            </f:facet>

                            <pf:selectOneMenu value="#{station.wardName}"
                                              id="stationName5"
                                              effect="fold"
                                              style="width: 95%;"
                                              required="true"
                                              requiredMessage="Bitte geben Sie einen aussagekräftigen Stationsnamen an"
                                              disabled="#{deptEdit.isReadOnly}"
                                              editable="true">
                                <f:selectItems value="#{deptEdit.stationPrefillNames}"/>
                                <pf:ajax event="change" update=":form:aggregatedtTable"/>
                            </pf:selectOneMenu>
                            <pf:message id="stationName5_message" for="stationName5"/>
                        </pf:column>
                        <pf:column id="colP21Location5" style="width: 100px;">

                            <f:facet name="header">
                                <h:outputText
                                        value="Standort#{deptEdit.deptBaseInformation.year ge 2018 ?  ' nach § 21 KHEntgG' : ''}"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnLocationP21}"
                                            for="colP21Location5"/>
                            </f:facet>

                            <inekInput:InputNumberValidator value="#{station.locationCodeP21}"
                                                            validatorFunction="#{deptEdit.isP21LocationCodeValid}"
                                                            validatorMessage="Ungültiger Standort nach § 21 KHEntgG für diese IK"
                                                            Style="width: 100%;"
                                                            renderElement=":form:aggregatedtTable"
                                                            rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                                            readonly="#{deptEdit.isReadOnly}"/>
                            <pf:inputText value="#{station.location2017}"
                                          rendered="#{deptEdit.deptBaseInformation.year eq 2017}"
                                          readonly="true"/>
                        </pf:column>
                        <pf:column id="colVz5" style="width: 100px;"
                                   rendered="#{deptEdit.deptBaseInformation.year ge 2018}">

                            <f:facet name="header">
                                <h:outputText value="Standortnummer nach § 293 Abs. 6 SGB V (77xxxx000)"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnLocationVz}"
                                            for="colVz5"/>
                            </f:facet>

                            <inekInput:InputNumberValidator value="#{station.locationCodeVz}"
                                                            Style="width: 100%;"
                                                            validatorFunction="#{deptEdit.isVZLocationCodeValid}"
                                                            validatorMessage="Ungültiger Standort für dieses IK"
                                                            thousendSeperator=""
                                                            renderElement=":form:aggregatedtTable"
                                                            readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column id="colBed5" style="width: 100px;"
                                   rendered="#{deptEdit.deptBaseInformation.year ge 2018}">

                            <f:facet name="header">
                                <h:outputText value="Bettenanzahl der Station"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnBeds}"
                                            for="colBed5"/>
                            </f:facet>

                            <inekInput:InputNumber value="#{station.bedCount}"
                                                   Style="width: 100%;"
                                                   minValue="1"
                                                   maxValue="999"
                                                   renderElement=":form:aggregatedtTable"
                                                   readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                    </pf:dataTable>

                    <pf:commandButton value="Station hinzufügen"
                                      actionListener="#{deptEdit.addNewStation(dept)}"
                                      process="@this"
                                      immediate="false"
                                      rendered="#{!deptEdit.isReadOnly and dept.seeDeptAreaId eq 0}"
                                      style="margin-top: 10px;"
                                      icon="fa fa-plus"
                                      update="depTable5"/>
                </pf:repeat>
            </div>

            <br/>

            <div style="margin-top: 20px;" class="ui-g-12" jsf:rendered="#{deptEdit.getDeptsByArea(6).size() gt 0}">

                <h1>#{deptEdit.getDeptAreaText(6)}</h1>

                <div jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                     style="text-align: justify; border: 1px solid #ffa727; padding: 10px;">
                    "Für den pflegesensitiven Bereich ""Neurologische Schlaganfalleinheit"" sind Angaben für sämtliche Stationen, auf denen Fälle mit einem OPS-Kode (8-981.* oder 8-98b.*) der neurologischen Komplexbehandlung des akuten Schlaganfalls oder der anderen neurologischen Komplexbehandlung des akuten Schlaganfalls dokumentiert worden sind, standortbezogen mit zugehöriger Bettenanzahl einzutragen.
                    Beachten Sie dabei bitte, dass im Bereich ""Angaben zu § 3 Abs. 3 Nr. 3 PpUGV"" weitere Angaben zu Stationen der Neurologischen Schlaganfalleinheit erforderlich sind, falls auf der jeweiligen Station die Voraussetzungen für die Kodierung der intensivmedizinischen OPS-Kodes (8-980.* und 8-98f.*) erfüllt sind."
                </div>

                <pf:repeat value="#{deptEdit.getDeptsByArea(6)}" var="dept">
                    <h3>Stationsangaben für den pflegesensitiven Bereich #{dept.sensitiveArea}#{dept.location ne '' ? ', ' += dept.locationForDisplay : ''}</h3>
                    <div class="inekInfoBox" jsf:rendered="#{!dept.required}">
                        Keine Angabe erforderlich
                    </div>

                    <pf:outputLabel rendered="#{dept.seeDeptAreaId gt 0}"
                                    value="Siehe #{deptEdit.getDeptAreaText(dept.seeDeptAreaId)}"/>
                    <pf:dataTable id="depTable6"
                                  value="#{dept.initDeptWards}"
                                  rendered="#{dept.seeDeptAreaId eq 0}"
                                  emptyMessage="Keine Einträge vorhanden"
                                  var="station">
                        <pf:column class="colIcon" style="width: 20px;" rendered="#{!deptEdit.isReadOnly}">
                            <inekIcon:DeleteIcon deleteFunction="#{deptEdit.deleteStationFromDept(dept, station)}"
                                                 updateElement="form"/>
                        </pf:column>
                        <pf:column id="colFab6" style="width: 120px;">

                            <f:facet name="header">
                                <h:outputText value="Fachabteilungsnr."/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnFab}"
                                            for="colFab6"/>
                            </f:facet>

                            <inekInput:InputTextValidator value="#{station.fab}"
                                                          Style="width: 100%;"
                                                          validatorFunction="#{deptEdit.isFabCodeValid}"
                                                          validatorMessage="Ungültige FAB"
                                                          maxlength="4"
                                                          readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column id="colFabName6">
                            <f:facet name="header">
                                <h:outputText value="Fachabteilungsname"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnDeptName}"
                                            for="colFabName6"/>
                            </f:facet>
                            <inekInput:InputText value="#{station.deptName}"
                                                 require="true"
                                                 Style="width: 100%;"
                                                 requiredMessage="Bitte geben Sie den Fachabteilungsnamen aus Ihrem Haus ein"
                                                 readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column id="colWardName6">

                            <f:facet name="header">
                                <h:outputText value="Stationsbezeichnung"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnWardName}"
                                            for="colWardName6"/>
                            </f:facet>

                            <pf:selectOneMenu value="#{station.wardName}"
                                              id="stationName6"
                                              effect="fold"
                                              style="width: 95%;"
                                              required="true"
                                              requiredMessage="Bitte geben Sie einen aussagekräftigen Stationsnamen an"
                                              disabled="#{deptEdit.isReadOnly}"
                                              editable="true">
                                <f:selectItems value="#{deptEdit.stationPrefillNames}"/>
                                <pf:ajax event="change" update=":form:aggregatedtTable"/>
                            </pf:selectOneMenu>
                            <pf:message id="stationName6_message" for="stationName6"/>
                        </pf:column>
                        <pf:column id="colP21Location6" style="width: 100px;">

                            <f:facet name="header">
                                <h:outputText
                                        value="Standort#{deptEdit.deptBaseInformation.year ge 2018 ?  ' nach § 21 KHEntgG' : ''}"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnLocationP21}"
                                            for="colP21Location6"/>
                            </f:facet>

                            <inekInput:InputNumberValidator value="#{station.locationCodeP21}"
                                                            validatorFunction="#{deptEdit.isP21LocationCodeValid}"
                                                            validatorMessage="Ungültiger Standort nach § 21 KHEntgG für diese IK"
                                                            Style="width: 100%;"
                                                            renderElement=":form:aggregatedtTable"
                                                            rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                                            readonly="#{deptEdit.isReadOnly}"/>
                            <pf:inputText value="#{station.location2017}"
                                          rendered="#{deptEdit.deptBaseInformation.year eq 2017}"
                                          readonly="true"/>
                        </pf:column>
                        <pf:column id="colVz6" style="width: 100px;"
                                   rendered="#{deptEdit.deptBaseInformation.year ge 2018}">

                            <f:facet name="header">
                                <h:outputText value="Standortnummer nach § 293 Abs. 6 SGB V (77xxxx000)"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnLocationVz}"
                                            for="colVz6"/>
                            </f:facet>

                            <inekInput:InputNumberValidator value="#{station.locationCodeVz}"
                                                            Style="width: 100%;"
                                                            validatorFunction="#{deptEdit.isVZLocationCodeValid}"
                                                            validatorMessage="Ungültiger Standort für dieses IK"
                                                            thousendSeperator=""
                                                            renderElement=":form:aggregatedtTable"
                                                            readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column id="colBed6" style="width: 100px;"
                                   rendered="#{deptEdit.deptBaseInformation.year ge 2018}">

                            <f:facet name="header">
                                <h:outputText value="Bettenanzahl der Station"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnBeds}"
                                            for="colBed6"/>
                            </f:facet>

                            <inekInput:InputNumber value="#{station.bedCount}"
                                                   Style="width: 100%;"
                                                   minValue="1"
                                                   maxValue="999"
                                                   renderElement=":form:aggregatedtTable"
                                                   readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                    </pf:dataTable>

                    <pf:commandButton value="Station hinzufügen"
                                      actionListener="#{deptEdit.addNewStation(dept)}"
                                      process="@this"
                                      immediate="false"
                                      rendered="#{!deptEdit.isReadOnly and dept.seeDeptAreaId eq 0}"
                                      style="margin-top: 10px;"
                                      icon="fa fa-plus"
                                      update="depTable6"/>
                </pf:repeat>
            </div>

            <br/>

            <div style="margin-top: 20px;" class="ui-g-12" jsf:rendered="#{deptEdit.getDeptsByArea(3).size() gt 0}">

                <h1 jsf:rendered="#{deptEdit.deptBaseInformation.year eq 2017}">Angaben zu § 3 Abs. 4 PpUGV (OPS-Liste Intensivmedizin)</h1>
                <h1 jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}">#{deptEdit.getDeptAreaText(3)}</h1>

                <div jsf:rendered="#{deptEdit.deptBaseInformation.year eq 2017}"
                     style="text-align: justify; border: 1px solid #ffa727; padding: 10px;">
                    Für den pflegesensitiven Bereich Intensivmedizin sind Angaben für alle Stationen, auf denen Betten als intensivmedizinische Behandlungseinheiten aufgestellt worden sind, einzutragen. Dies gilt unabhängig davon, ob für das einzelne (individuelle) Intensivbett die Voraussetzungen für die Kodierung der intensivmedizinischen OPS-Kodes (8-980.* und 8-98f.*) erfüllt sind.
                </div>

                <div jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                     style="text-align: justify; border: 1px solid #ffa727; padding: 10px;">
                    Für den pflegesensitiven Bereich Intensivmedizin sind Angaben für sämtliche Stationen (inkl. zugehöriger Bettenanzahl) standortbezogen einzutragen, die die Merkmale und Strukturbedingungen der entsprechenden OPS-Kodes (8-980.* und 8-98f.*) erfüllen, sodass die entsprechenden OPS-Kodes dort grundsätzlich verschlüsselt werden können. Dies gilt unabhängig davon, ob für das einzelne (individuelle) Intensivbett die Voraussetzungen für die Kodierung der intensivmedizinischen OPS-Kodes erfüllt sind.
                    <br/>
                    Bei einer intensivmedizinischen Fachabteilung mit entsprechendem Fachabteilungsschlüssel (i.d.R. 36xx) geben Sie diesen bitte im Feld Fachabteilungsnummer an. Bei in anderen Fachabteilungen aufgestellten Intensivbetten geben Sie bitte den entsprechenden FAB-Schlüssel an, bspw. bei Intensivbetten in der Fachabteilung 0300 Kardiologie den FAB-Schlüssel 0300. Interdisziplinär belegte Intensivstationen ohne Fachabteilungsschlüssel 36xx, bei denen in der Falldokumentation die Fachabteilungsschlüssel der jeweils belegenden Fachabteilungen dokumentiert sind, bitten wir Sie, den fiktiven Fachabteilungsschlüssel 3699 und als Fachabteilungsnamen „Interdisziplinäre Intensivmedizin“ zu übermitteln.
                </div>

                <pf:repeat value="#{deptEdit.getDeptsByArea(3)}" var="dept">
                    <h3>Stationsangaben für den pflegesensitiven Bereich #{dept.sensitiveArea}#{dept.location ne '' ? ', ' += dept.locationForDisplay : ''}</h3>
                    <div class="inekInfoBox" jsf:rendered="#{!dept.required}">
                        Keine Angabe erforderlich
                    </div>

                    <pf:outputLabel rendered="#{dept.seeDeptAreaId gt 0}"
                                    value="Siehe #{deptEdit.getDeptAreaText(dept.seeDeptAreaId)}"/>
                    <pf:dataTable id="depTable3"
                                  value="#{dept.initDeptWards}"
                                  rendered="#{dept.seeDeptAreaId eq 0}"
                                  emptyMessage="Keine Einträge vorhanden"
                                  var="station">
                        <pf:column class="colIcon" style="width: 20px;" rendered="#{!deptEdit.isReadOnly}">
                            <inekIcon:DeleteIcon deleteFunction="#{deptEdit.deleteStationFromDept(dept, station)}"
                                                 updateElement="form"/>
                        </pf:column>
                        <pf:column id="colFab3" style="width: 120px;">

                            <f:facet name="header">
                                <h:outputText value="Fachabteilungsnr."/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnFab}"
                                            for="colFab3"/>
                            </f:facet>

                            <inekInput:InputTextValidator value="#{station.fab}"
                                                          Style="width: 100%;"
                                                          validatorFunction="#{deptEdit.isFabCodeValid}"
                                                          validatorMessage="Ungültige FAB"
                                                          maxlength="4"
                                                          readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column id="colFabName3">
                            <f:facet name="header">
                                <h:outputText value="Fachabteilungsname"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnDeptName}"
                                            for="colFabName3"/>
                            </f:facet>
                            <inekInput:InputText value="#{station.deptName}"
                                                 require="true"
                                                 Style="width: 100%;"
                                                 requiredMessage="Bitte geben Sie den Fachabteilungsnamen aus Ihrem Haus ein"
                                                 readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column id="colWardName3">

                            <f:facet name="header">
                                <h:outputText value="Stationsbezeichnung"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnWardName}"
                                            for="colWardName3"/>
                            </f:facet>

                            <pf:selectOneMenu value="#{station.wardName}"
                                              id="stationName3"
                                              effect="fold"
                                              style="width: 95%;"
                                              required="true"
                                              requiredMessage="Bitte geben Sie einen aussagekräftigen Stationsnamen an"
                                              disabled="#{deptEdit.isReadOnly}"
                                              editable="true">
                                <f:selectItems value="#{deptEdit.stationPrefillNames}"/>
                                <pf:ajax event="change" update=":form:aggregatedtTable"/>
                            </pf:selectOneMenu>
                            <pf:message id="stationName3_message" for="stationName3"/>
                        </pf:column>
                        <pf:column id="colP21Location3" style="width: 100px;">

                            <f:facet name="header">
                                <h:outputText
                                        value="Standort#{deptEdit.deptBaseInformation.year ge 2018 ?  ' nach § 21 KHEntgG' : ''}"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnLocationP21}"
                                            for="colP21Location3"/>
                            </f:facet>

                            <inekInput:InputNumberValidator value="#{station.locationCodeP21}"
                                                            validatorFunction="#{deptEdit.isP21LocationCodeValid}"
                                                            validatorMessage="Ungültiger Standort nach § 21 KHEntgG für diese IK"
                                                            Style="width: 100%;"
                                                            renderElement=":form:aggregatedtTable"
                                                            rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                                            readonly="#{deptEdit.isReadOnly}"/>
                            <pf:inputText value="#{station.location2017}"
                                          rendered="#{deptEdit.deptBaseInformation.year eq 2017}"
                                          readonly="true"/>
                        </pf:column>
                        <pf:column id="colVz3" style="width: 100px;"
                                   rendered="#{deptEdit.deptBaseInformation.year ge 2018}">

                            <f:facet name="header">
                                <h:outputText value="Standortnummer nach § 293 Abs. 6 SGB V (77xxxx000)"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnLocationVz}"
                                            for="colVz3"/>
                            </f:facet>

                            <inekInput:InputNumberValidator value="#{station.locationCodeVz}"
                                                            Style="width: 100%;"
                                                            validatorFunction="#{deptEdit.isVZLocationCodeValid}"
                                                            validatorMessage="Ungültiger Standort für dieses IK"
                                                            thousendSeperator=""
                                                            renderElement=":form:aggregatedtTable"
                                                            readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column id="colBed3" style="width: 100px;"
                                   rendered="#{deptEdit.deptBaseInformation.year ge 2018}">

                            <f:facet name="header">
                                <h:outputText value="Bettenanzahl der Station"/>
                                <i class="fa fa-question-circle"
                                   jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}"></i>
                                <pf:tooltip rendered="#{deptEdit.deptBaseInformation.year ge 2018}"
                                            value="#{msg.careColumnBeds}"
                                            for="colBed3"/>
                            </f:facet>

                            <inekInput:InputNumber value="#{station.bedCount}"
                                                   Style="width: 100%;"
                                                   minValue="1"
                                                   maxValue="999"
                                                   renderElement=":form:aggregatedtTable"
                                                   readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                    </pf:dataTable>

                    <pf:commandButton value="Station hinzufügen"
                                      actionListener="#{deptEdit.addNewStation(dept)}"
                                      process="@this"
                                      immediate="false"
                                      rendered="#{!deptEdit.isReadOnly and dept.seeDeptAreaId eq 0}"
                                      style="margin-top: 10px;"
                                      icon="fa fa-plus"
                                      update="depTable3"/>
                </pf:repeat>
            </div>
            <br/>

            <div style="margin-top: 20px;" class="ui-g-12"
                 jsf:rendered="#{deptEdit.deptBaseInformation.ik > 0 and deptEdit.deptBaseInformation.year eq 2017}">

                <h1>Umbenennung oder strukturelle Veränderungen (§ 5 Abs. 4 PpUGV)</h1>

                <pf:dataTable id="depTableAfterTargetYear"
                              value="#{deptEdit.stationsAfterTargetYear}"
                              emptyMessage="Noch keine Einträge vorhanden"
                              var="deptAfterTargetYear">

                    <pf:columnGroup type="header">
                        <pf:row>
                            <pf:column style="width: 20px;" headerText=""/>
                            <pf:column colspan="4" headerText="2017" style="border-right-width:5px;"/>
                            <pf:column colspan="6" headerText="Nach 2017"/>
                        </pf:row>
                        <pf:row>
                            <pf:column style="width: 20px;" headerText=""/>
                            <pf:column headerText="Fachabteilung"/>
                            <pf:column headerText="Fachabteilung gem. KH"/>
                            <pf:column headerText="Station"/>
                            <pf:column headerText="Standort" style="border-right-width:5px;"/>
                            <pf:column headerText="PS Bereich"/>
                            <pf:column headerText="FAB - Nummer"/>
                            <pf:column headerText="FAB Name"/>
                            <pf:column headerText="Station"/>
                            <pf:column headerText="Standort"/>
                            <pf:column headerText="Anmerkung"/>
                        </pf:row>

                    </pf:columnGroup>
                    <pf:column class="colIcon" style="width: 20px;">
                        <inekIcon:DeleteIcon deleteFunction="#{deptEdit.deleteDeptAfterTargetYear(deptAfterTargetYear)}"
                                             show="#{!deptEdit.isReadOnly}"
                                             updateElement="form"/>
                    </pf:column>
                    <pf:column headerText="Fachabteilung">
                        <pf:outputLabel
                                value="#{deptAfterTargetYear.dept.deptNumber} - #{deptAfterTargetYear.dept.deptName}"/>
                    </pf:column>
                    <pf:column headerText="Fachabteilung gem. KH">
                        <inekInput:InputText value="#{deptAfterTargetYear.deptNameHospital}"
                                             require="true"
                                             Style="width: 100%;"
                                             requiredMessage="Bitte geben Sie den Fachabteilungsnamen an"
                                             readonly="#{deptEdit.isReadOnly}"/>
                    </pf:column>
                    <pf:column headerText="Station">
                        <inekInput:InputText value="#{deptAfterTargetYear.stationNameTargetYear}"
                                             require="true"
                                             Style="width: 100%;"
                                             requiredMessage="Bitte geben Sie die Station an"
                                             readonly="#{deptEdit.isReadOnly}"/>
                    </pf:column>
                    <pf:column headerText="Standort" style="border-right-width:5px;">
                        <inekInput:InputText value="#{deptAfterTargetYear.locationCodeTargetYear}"
                                             Style="width: 100%;"
                                             readonly="#{deptEdit.isReadOnly}"/>
                    </pf:column>
                    <pf:column headerText="PS Bereich">
                        <inekInput:InputText value="#{deptAfterTargetYear.sensitiveArea}"
                                             Style="width: 100%;"
                                             readonly="#{deptEdit.isReadOnly}"/>
                    </pf:column>
                    <pf:column headerText="FAB - Nummer">
                        <inekInput:InputText value="#{deptAfterTargetYear.deptNumber}"
                                             maxlength="4"
                                             Style="width: 100%;"
                                             readonly="#{deptEdit.isReadOnly}"/>
                    </pf:column>
                    <pf:column headerText="FAB Name">
                        <inekInput:InputText value="#{deptAfterTargetYear.deptName}"
                                             Style="width: 100%;"
                                             readonly="#{deptEdit.isReadOnly}"/>
                    </pf:column>
                    <pf:column headerText="Station">
                        <inekInput:InputText value="#{deptAfterTargetYear.stationName}"
                                             Style="width: 100%;"
                                             readonly="#{deptEdit.isReadOnly}"/>
                    </pf:column>
                    <pf:column headerText="Standort">
                        <inekInput:InputText value="#{deptAfterTargetYear.locationCode}"
                                             Style="width: 100%;"
                                             readonly="#{deptEdit.isReadOnly}"/>
                    </pf:column>
                    <pf:column headerText="Anmerkung">
                        <pf:inputTextarea value="#{deptAfterTargetYear.comment}"
                                          rows="1"
                                          style="width: 100%;"
                                          readonly="#{deptEdit.isReadOnly}"/>
                    </pf:column>
                </pf:dataTable>

                <pf:commandButton value="Neuen Eintrag"
                                  onclick="PF('dlgFabSelection').show();"
                                  immediate="false"
                                  rendered="#{!deptEdit.isReadOnly}"
                                  style="margin-top: 10px;"
                                  icon="fa fa-plus"
                                  update="depTableAfterTargetYear"/>
            </div>


            <div class="ui-g-12" jsf:id="aggregatedtTable" jsf:rendered="#{deptEdit.deptBaseInformation.year ge 2018}">
                <h1>Zusammengefasste Stationsübersicht</h1>

                <pf:dataTable value="#{deptEdit.aggregatedWards}"
                              tableStyle="width: 100%;"
                              emptyMessage="Es konnten keine Aggregate erstellt werden"
                              var="aggregate">
                    <pf:column headerText="Gültig von" style="width: 120px;">
                        <h:outputText value="#{aggregate.validFrom}">
                            <f:convertDateTime pattern="dd.MM.yyyy"/>
                        </h:outputText>
                    </pf:column>
                    <pf:column headerText="Gültig bis" style="width: 120px;">
                        <h:outputText value="#{aggregate.validTo}" rendered="#{aggregate.validTo != null}">
                            <f:convertDateTime pattern="dd.MM.yyyy"/>
                        </h:outputText>
                        <h:outputText value="unbegrenzt" rendered="#{aggregate.validTo == null}"/>
                    </pf:column>
                    <pf:column headerText="Pflegesensitiver Bereich" style="width: 120px;">
                        <pf:outputLabel value="#{aggregate.sensitiveAreas}"/>
                    </pf:column>
                    <pf:column headerText="Fachabteilungsnr.">
                        <pf:outputLabel value="#{aggregate.fabs}"/>
                    </pf:column>
                    <pf:column headerText="Fachabteilungsname">
                        <pf:outputLabel value="#{aggregate.deptNames}"/>
                    </pf:column>di
                    <pf:column headerText="Stationsbezeichnung">
                        <pf:outputLabel value="#{aggregate.wardName}"/>
                    </pf:column>
                    <pf:column headerText="Standort nach § 21 KHEntgG">
                        <pf:outputLabel value="#{aggregate.locationCode21}"/>
                    </pf:column>
                    <pf:column headerText="Standortnummer nach § 293 Abs. 6 SGB V (77xxxx000)">
                        <pf:outputLabel value="#{aggregate.locationCodeVz}"/>
                    </pf:column>
                    <pf:column headerText="Bettenanzahl der Station">
                        <pf:outputLabel value="#{aggregate.differentBedCount ? 'unterschiedlich' : aggregate.beds }"/>
                    </pf:column>
                </pf:dataTable>
            </div>

        </div>



    </div>

</ui:composition>

