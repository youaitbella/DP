<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>

<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:pf="http://primefaces.org/ui"
                xmlns:inekIk="http://xmlns.jcp.org/jsf/composite/components/Other"
                xmlns:inekInput="http://xmlns.jcp.org/jsf/composite/components/Input"
                xmlns:inekIcon="http://xmlns.jcp.org/jsf/composite/components/Icons"
                xmlns:jsf="http://xmlns.jcp.org/jsf">

    <ui:remove>
        <inekIk:MultiIk label="#{msg.lblIkShort}"
                        required="true"
                        value="#{deptEdit.deptBaseInformation.ik}"
                        ikList="#{deptEdit.validIks}"
                        readonly="#{deptEdit.isReadOnly}"
                        listener="#{deptEdit.ikChanged()}"
                        isFixed="#{deptEdit.deptBaseInformation.id gt 0}"
                        updateElement="form"/>
    </ui:remove>

    <div class="ui-g">
        <div class="card">
            <div class="ui-g-12">
                <inekIk:MultiIk_V2 label="#{msg.lblIkShort}"
                                   required="true"
                                   value="#{deptEdit.deptBaseInformation.ik}"
                                   ikList="#{deptEdit.validIks}"
                                   readonly="#{deptEdit.isReadOnly}"
                                   listener="#{deptEdit.ikChanged()}"
                                   isFixed="#{deptEdit.deptBaseInformation.id gt 0}"
                                   updateElement="form"/>

            </div>


            <div class="ui-g-12">

                <h1>Angaben zu § 3 Abs. 2 Nr. 1 FAB</h1>
                <pf:repeat value="#{deptEdit.getDeptsByArea(1)}" var="dept">
                    <h4>Stationsangaben für #{dept.deptName}</h4>
                    <pf:dataTable id="depTable"
                                  value="#{dept.deptStations}"
                                  emptyMessage="Noch keine Stationen erfasst"
                                  var="station">
                        <pf:column class="colIcon" style="width: 20px;">
                            <inekIcon:DeleteIcon deleteFunction="#{deptEdit.deleteStationFromDept(dept, station)}"
                                                 show="#{!deptEdit.isReadOnly}"
                                                 updateElement="form"/>
                        </pf:column>
                        <pf:column headerText="Stationsbezeichnung">
                            <inekInput:InputText value="#{station.stationName}"
                                                 require="true"
                                                 Style="width: -webkit-fill-available;"
                                                 requiredMessage="Bitte geben Sie einen aussagekräftigen Stationsnamen an"
                                                 readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                        <pf:column headerText="Standort">
                            <inekInput:InputNumber value="#{station.locationCode}"
                                                   require="true"
                                                   Style="width: -webkit-fill-available;"
                                                   readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                    </pf:dataTable>

                    <pf:commandButton value="Station zur #{dept.deptName} hinzufügen"
                                      actionListener="#{deptEdit.addNewStation(dept)}"
                                      process="@this"
                                      immediate="false"
                                      rendered="#{!deptEdit.isReadOnly}"
                                      style="margin-top: 10px;"
                                      icon="fa fa-plus"
                                      update="depTable"/>

                </pf:repeat>

            </div>

            <div class="ui-g-12">

                <h1>Angaben zu § 3 Abs. 2 Nr. 2 DRG-Liste</h1>

                <pf:repeat value="#{deptEdit.getDeptsByArea(2)}" var="dept">
                    <h4>Stationsangaben für #{dept.deptName}</h4>
                    <pf:dataTable id="depTable"
                                  value="#{dept.deptStations}"
                                  emptyMessage="Noch keine Stationen erfasst"
                                  var="station">
                        <pf:column style="width: 20px;">
                            <inekIcon:DeleteIcon deleteFunction="#{deptEdit.deleteStationFromDept(dept, station)}"
                                                 show="#{!deptEdit.isReadOnly}"
                                                 updateElement="form"/>
                        </pf:column>
                        <pf:column headerText="Stationsbezeichnung">
                            <inekInput:InputText value="#{station.stationName}"
                                                 Style="width: -webkit-fill-available;"
                                                 require="true"
                                                 requiredMessage="Bitte geben Sie einen aussagekräftigen Stationsnamen an"
                                                 readonly="#{deptEdit.isReadOnly}"
                                                 updateComponents="form"/>
                        </pf:column>
                        <pf:column headerText="Standort">
                            <inekInput:InputNumber value="#{station.locationCode}"
                                                   require="true"
                                                   Style="width: -webkit-fill-available;"
                                                   readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                    </pf:dataTable>

                    <pf:commandButton value="Station zur #{dept.deptName} hinzufügen"
                                      actionListener="#{deptEdit.addNewStation(dept)}"
                                      process="@this"
                                      immediate="false"
                                      rendered="#{!deptEdit.isReadOnly}"
                                      style="margin-top: 10px;"
                                      icon="fa fa-plus"
                                      update="depTable"/>
                </pf:repeat>

            </div>

            <div class="ui-g-12" jsf:rendered="#{deptEdit.getDeptsByArea(3).size() gt 0}">

                <h1>Angaben zu § 3 Abs. 2 Nr. 3 OPS</h1>

                <pf:repeat value="#{deptEdit.getDeptsByArea(3)}" var="dept">
                    <h4>Stationsangaben für #{dept.deptName}</h4>
                    <pf:dataTable id="depTable"
                                  value="#{dept.deptStations}"
                                  emptyMessage="Noch keine Stationen erfasst"
                                  var="station">
                        <pf:column class="colIcon">
                            <inekIcon:DeleteIcon deleteFunction="#{deptEdit.deleteStationFromDept(dept, station)}"
                                                 show="#{!deptEdit.isReadOnly}"
                                                 updateElement="form"/>
                        </pf:column>
                        <pf:column headerText="Stationsbezeichnung">
                            <inekInput:InputText value="#{station.stationName}"
                                                 Style="width: -webkit-fill-available;"
                                                 require="true"
                                                 requiredMessage="Bitte geben Sie einen aussagekräftigen Stationsnamen an"
                                                 readonly="#{deptEdit.isReadOnly}"
                                                 updateComponents="form"/>
                        </pf:column>
                        <pf:column headerText="Standort">
                            <inekInput:InputNumber value="#{station.locationCode}"
                                                   require="true"
                                                   Style="width: -webkit-fill-available;"
                                                   readonly="#{deptEdit.isReadOnly}"/>
                        </pf:column>
                    </pf:dataTable>

                    <pf:commandButton value="Station zur #{dept.deptName} hinzufügen"
                                      actionListener="#{deptEdit.addNewStation(dept)}"
                                      process="@this"
                                      immediate="false"
                                      rendered="#{!deptEdit.isReadOnly}"
                                      style="margin-top: 10px;"
                                      icon="fa fa-plus"
                                      update="depTable"/>
                </pf:repeat>
            </div>
        </div>
    </div>

    <ui:remove>

        <div style="border: 3px solid #7f9baf; padding: 5px;">
            Hier kommt ein langer Text rein, warum wir diese Daten erfassen
        </div>

        <h2>§ 3 Abs. 2 FAB</h2>

        <pf:repeat value="#{deptEdit.getDeptsByArea(1)}" var="dept">
            <h4>Stationsangaben für #{dept.deptName}</h4>
            <pf:dataTable id="depTable"
                          value="#{dept.deptStations}"
                          emptyMessage="Noch keine Stationen erfasst"
                          var="station">
                <pf:column class="colIcon">
                    <inekIcon:DeleteIcon deleteFunction="#{deptEdit.deleteStationFromDept(dept, station)}"
                                         show="#{!deptEdit.isReadOnly}"
                                         updateElement="form"/>
                </pf:column>
                <pf:column headerText="Stationsbezeichnung">
                    <inekInput:InputText value="#{station.stationName}"
                                         require="true"
                                         Style="width: -webkit-fill-available;"
                                         requiredMessage="Bitte geben Sie einen aussagekräftigen Stationsnamen an"
                                         readonly="#{deptEdit.isReadOnly}"/>
                </pf:column>
                <pf:column headerText="Standort">
                    <inekInput:InputNumber value="#{station.locationCode}"
                                           require="true"
                                           Style="width: -webkit-fill-available;"
                                           readonly="#{deptEdit.isReadOnly}"/>
                </pf:column>
            </pf:dataTable>

            <pf:commandButton value="Station zur #{dept.deptName} hinzufügen"
                              actionListener="#{deptEdit.addNewStation(dept)}"
                              process="@this"
                              immediate="false"
                              rendered="#{!deptEdit.isReadOnly}"
                              update="depTable"/>

        </pf:repeat>

        <h2>§ 3 Abs. 2 DRG-Liste</h2>

        <pf:repeat value="#{deptEdit.getDeptsByArea(2)}" var="dept">
            <h4>Stationsangaben für #{dept.deptName}</h4>
            <pf:dataTable id="depTable"
                          value="#{dept.deptStations}"
                          emptyMessage="Noch keine Stationen erfasst"
                          var="station">
                <pf:column class="colIcon">
                    <inekIcon:DeleteIcon deleteFunction="#{deptEdit.deleteStationFromDept(dept, station)}"
                                         show="#{!deptEdit.isReadOnly}"
                                         updateElement="form"/>
                </pf:column>
                <pf:column headerText="Stationsbezeichnung">
                    <inekInput:InputText value="#{station.stationName}"
                                         Style="width: -webkit-fill-available;"
                                         require="true"
                                         requiredMessage="Bitte geben Sie einen aussagekräftigen Stationsnamen an"
                                         readonly="#{deptEdit.isReadOnly}"
                                         updateComponents="form"/>
                </pf:column>
                <pf:column headerText="Standort">
                    <inekInput:InputNumber value="#{station.locationCode}"
                                           require="true"
                                           readonly="#{deptEdit.isReadOnly}"/>
                </pf:column>
            </pf:dataTable>

            <pf:commandButton value="Station zur #{dept.deptName} hinzufügen"
                              actionListener="#{deptEdit.addNewStation(dept)}"
                              process="@this"
                              immediate="false"
                              rendered="#{!deptEdit.isReadOnly}"
                              update="depTable"/>
        </pf:repeat>


        <h2 jsf:rendered="#{deptEdit.getDeptsByArea(3).size() gt 0}">§ 3 Abs. 2 OPS</h2>

        <pf:repeat value="#{deptEdit.getDeptsByArea(3)}" var="dept">
            <h4>Stationsangaben für #{dept.deptName}</h4>
            <pf:dataTable id="depTable"
                          value="#{dept.deptStations}"
                          emptyMessage="Noch keine Stationen erfasst"
                          var="station">
                <pf:column class="colIcon">
                    <inekIcon:DeleteIcon deleteFunction="#{deptEdit.deleteStationFromDept(dept, station)}"
                                         show="#{!deptEdit.isReadOnly}"
                                         updateElement="form"/>
                </pf:column>
                <pf:column headerText="Stationsbezeichnung">
                    <inekInput:InputText value="#{station.stationName}"
                                         Style="width: -webkit-fill-available;"
                                         require="true"
                                         requiredMessage="Bitte geben Sie einen aussagekräftigen Stationsnamen an"
                                         readonly="#{deptEdit.isReadOnly}"
                                         updateComponents="form"/>
                </pf:column>
                <pf:column headerText="Standort">
                    <inekInput:InputNumber value="#{station.locationCode}"
                                           require="true"
                                           readonly="#{deptEdit.isReadOnly}"/>
                </pf:column>
            </pf:dataTable>

            <pf:commandButton value="Station zur #{dept.deptName} hinzufügen"
                              actionListener="#{deptEdit.addNewStation(dept)}"
                              process="@this"
                              immediate="false"
                              rendered="#{!deptEdit.isReadOnly}"
                              update="depTable"/>
        </pf:repeat>

    </ui:remove>

</ui:composition>

