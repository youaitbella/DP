<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="StatemenOfParticipanceEdit.xhtml"
                xmlns:cb="http://inek.org/dataportal/clientbehaviour"
                xmlns:inek="http://xmlns.jcp.org/jsf/composite/components"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <ui:define name="editContent">

        <h2>#{msg.lblHospital}</h2>

        <div class="inputPart">
            <h:outputLabel styleClass="label" for="ikMulti" value="#{msg.lblIkShort}:"/>
            <h:message for="ikMulti" id="msgMultiIk" styleClass="errorMessage"/>
            <br/>
            <h:selectOneMenu styleClass="inputmedium"
                             rendered="#{!editStatementOfParticipance.readOnly}"
                             id="ikMulti"
                             title="#{msg.titleIK}"
                             required="true"
                             requiredMessage="#{msg.msgValueNeeded}"
                             value="#{editStatementOfParticipance.statement.ik}">
                <f:selectItems value="#{editStatementOfParticipance.iks}"/>
                <f:ajax event="blur" render="@this :logout:remaining msgMultiIk"/>
                <f:ajax event="change" listener="#{editStatementOfParticipance.changedIk}" render="@form :logout:remaining msgMultiIk"/>
            </h:selectOneMenu>
            <h:inputText styleClass="inputlong" readonly="true" value="#{editStatementOfParticipance.statement.ik}" rendered="#{editStatementOfParticipance.readOnly}"/>
            <h:outputLabel id="hospitalName" for="khName" styleClass="label marginLeft" value="#{editStatementOfParticipance.hospitalInfo}"/>
            <br/>
            <h:outputText value="#{msg.lblNubHintMoreIks}" rendered="#{!editStatementOfParticipance.readOnly}"/>
        </div>


        <h2>#{msg.lblContactPerson}</h2>

        <h:dataTable value="#{editStatementOfParticipance.statement.contacts}" 
                     var="contact" 
                     width="100%" rowClasses="row1, row2" 
                     columnClasses="colIcon, volValue, col04em, col04em, volValue, colValue">

            <h:column>
                <h:commandLink action="#{editStatementOfParticipance.deleteContact(contact)}" 
                               rendered="#{!editStatementOfParticipance.readOnly}"
                               immediate="true" styleClass="colIcon">
                    <h:graphicImage alt="#{msg.btnDelete}" name="Icon/small/delete.png" title="#{msg.btnDelete}" value=""/>
                    <cb:confirmDelete/>
                </h:commandLink>
            </h:column>

            <h:column>
                <f:facet name="header">#{msg.lblMail}</f:facet>
                <inek:InputTextWithMessage id="contactMail" value="#{contact.mail}" readOnly="#{editStatementOfParticipance.readOnly}" styleClass="fullWidth" required="true">
                    <f:validator validatorId="EmailValidator" for="contactMail"/>
                </inek:InputTextWithMessage>
            </h:column>

            <h:column>
                <f:facet name="header">#{msg.lblSalutation}</f:facet>
                <h:selectOneMenu styleClass="inputshort" id="cbxGender" value="#{contact.gender}" hideNoSelectionOption="true" 
                                 required="true" requiredMessage="#{msg.msgChooseEntryShort}">
                    <f:selectItem itemLabel="#{msg.lblChooseEntryShort}" itemValue="#{null}" noSelectionOption="true"/>
                    <f:selectItem itemLabel="#{msg.salutationFemale}" itemValue="1"/>
                    <f:selectItem itemLabel="#{msg.salutationMale}" itemValue="2"/>
                    <f:ajax event="blur" render="@this msgContactGender :logout:remaining"/>
                </h:selectOneMenu>
                <h:message for="cbxGender" id="msgContactGender" errorClass="errorMessage"/>
            </h:column>

            <h:column>
                <f:facet name="header">#{msg.lblTitle}</f:facet>
                <inek:InputTextWithMessage id="contactTitle" value="#{contact.title}" readOnly="#{editStatementOfParticipance.readOnly}" styleClass="fullWidth"/>
            </h:column>

            <h:column>
                <f:facet name="header">#{msg.lblFirstName}</f:facet>
                <inek:InputTextWithMessage value="#{contact.firstName}" readOnly="#{editStatementOfParticipance.readOnly}" styleClass="fullWidth"/>
            </h:column>

            <h:column>
                <f:facet name="header">#{msg.lblLastName}</f:facet>
                <inek:InputTextWithMessage value="#{contact.lastName}" readOnly="#{editStatementOfParticipance.readOnly}" styleClass="fullWidth"/>
            </h:column>

            <h:column>
                <f:facet name="header">#{msg.lblPhone}</f:facet>
                <inek:InputTextWithMessage value="#{contact.phone}" readOnly="#{editStatementOfParticipance.readOnly}" styleClass="fullWidth"/>
            </h:column>

            <h:column>
                <f:facet name="header">#{msg.lblDrg}</f:facet>
                <inek:Checkbox value="#{contact.drg}" readOnly="#{editStatementOfParticipance.readOnly}"/>
            </h:column>

            <h:column>
                <f:facet name="header">#{msg.lblPsy}</f:facet>
                <inek:Checkbox value="#{contact.psy}" readOnly="#{editStatementOfParticipance.readOnly}"/>
            </h:column>

            <h:column>
                <f:facet name="header">#{msg.lblInv}</f:facet>
                <inek:Checkbox value="#{contact.inv}" readOnly="#{editStatementOfParticipance.readOnly}"/>
            </h:column>

            <h:column>
                <f:facet name="header">#{msg.lblTpg}</f:facet>
                <inek:Checkbox value="#{contact.tpg}" readOnly="#{editStatementOfParticipance.readOnly}"/>
            </h:column>

        </h:dataTable>

        <h:commandLink id="addButton" styleClass="addButton inputPart" value="#{msg.btnAddEntry}"
                       rendered="#{!editStatementOfParticipance.readOnly}">
            <f:ajax event="click" render="@form :logout:remaining" listener="#{editStatementOfParticipance.addContact}"/>
        </h:commandLink>

    </ui:define>
</ui:composition>
