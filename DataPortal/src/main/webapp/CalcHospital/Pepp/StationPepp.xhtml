<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>

<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:cb="http://inek.org/dataportal/clientbehaviour"
                xmlns:inek="http://xmlns.jcp.org/jsf/composite/components"
                xmlns:calc="http://xmlns.jcp.org/jsf/composite/components/calc"
                xmlns:jsf="http://xmlns.jcp.org/jsf">

    <h2>Anwendung des Betreuungsintensitätsmodells (einheitliches Betreuungsintensitätsmodell, veröffentlicht am 28.11.2012)</h2><br/>
    <inek:BooleanRadioButton id="bimAll" value="#{editCalcBasicsPepp.calcBasics.bimAll}" label="Leistungsdokumentation gem. einheitlichem BIM liegen in allen PSY-Fachabteilungen und Stationen vor:" labelStyle="label"/>

    <div class="inputPart">
        <span class="label">Kommentar:<sup style="font-size: 9px;">1</sup></span><br/>
        <h:inputTextarea value="#{editCalcBasicsPepp.calcBasics.intensiveExceptionalPermission}" styleClass="areaMiddleLow" /><br/>
        <span class="label"><sup style="font-size: 10px;">1: Bitte tragen Sie hier auch ein, falls eine Ausnahmegenehmigung für das Datenjahr vorliegt</sup></span>
    </div>

    <hr/>

    <div class="inputPart">
        <span class="label">Leistungsdokumentation gem. einheitlichem BIM liegen in den folgenden Fachabteilungen nicht oder nur teilweise vor, als Alternativverfahren wird angewendet:</span><br/>
        <h:dataTable  headerClass="list-header"
                      value="#{editCalcBasicsPepp.calcBasics.kgpStationDepartmentList}" var="item" width="100%" rowClasses="row1, row2" 
                      columnClasses="colIcon, col20, col60"
                      rendered="true"
                      >
            <h:column>
                <f:facet name="header">
                    <h:outputText value=""/>
                </f:facet>
                <h:commandLink styleClass="colIcon">
                    <h:graphicImage alt="#{msg.btnDelete}" name="Icon/small/delete.png" title="#{msg.btnDelete}" value=""/>
                    <f:ajax event="click" render="@form :logout:remaining" listener="#{editCalcBasicsPepp.deleteStationAlternative(item)}"/>
                </h:commandLink>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="Fachabteilung (Name/Schlüssel nach § 301 SGBV)"/><br/>
                </f:facet>
                <inek:InputTextWithMessage value="#{item.departmentName}" styleClass="inputwide" />
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="Alternativverfahren"/>
                </f:facet>
                <inek:InputTextWithMessage value="#{item.alternative}" styleClass="inputwide" />
            </h:column>

        </h:dataTable>
        <h:commandLink styleClass="addButton inputPart" value="#{msg.btnAddEntry}">
            <f:ajax event="click" render="@form :logout:remaining" listener="#{editCalcBasicsPepp.addStationAlternative()}"/>
        </h:commandLink>
    </div>

    <hr/>

    <br/>
    <span class="label">Bitte füllen Sie die nachfolgenden Tabellen für alle Stationen aus, bei Bedarf können die Tabellen durch das Anfügen zusätzlicher Zeilen verlängert werden.</span> <br/><br/>

    <style>
        .col-border-right {
            border-right: solid 1px #56748a;
        }
        .col-border-bottom {
            border-bottom: solid 1px #56748a;
        }

        input[type=checkbox] {
            float: right;
            margin-right: 30px;
        }
    </style>
    
    <table id="table1">
        <tr>
            <td></td>
            <td class="centered col-border-right col-border-bottom" colspan="5">Leistungsdaten und Kosten in den Kostenstellengruppen 21 (Regelbehandlung) und 22 (Intensivbehandlung)</td>
            <td class="centered col-border-right col-border-bottom" colspan="2">Regelbehandlung</td>
            <td class="centered col-border-right col-border-bottom" colspan="2">Intensivbehandlung</td>
            <td class="centered col-border-right col-border-bottom" rowspan="2">Auslastung (wird berechnet)</td>
        </tr>
        <tr>
            <td></td>
            <td class="centered col-border-right col-border-bottom">Nummer der Kostenstelle</td>
            <td class="centered col-border-right col-border-bottom">Station<br/>(aussagekräftiger Name, Behandlungsschwerpunkt)</td>
            <td class="centered col-border-right col-border-bottom">Eindeutige Zuordnung nach Psych-PV* (A, S, G, KJP, P)</td>
            <td class="centered col-border-right col-border-bottom">Anzahl Betten</td>
            <td class="centered col-border-right col-border-bottom">bettenführende Aufnahmestation (bitte ankreuzen)</td>
            <td class="centered col-border-right col-border-bottom">Summe Pflegetage</td>
            <td class="centered col-border-right col-border-bottom" title="Angabe von Minuten für Krankenhäuser, in denen die Methode LEP angewendet wird">Summe Gewichtungspunkte**</td>
            <td class="centered col-border-right col-border-bottom">Summe Pflegetage</td>
            <td class="centered col-border-right col-border-bottom" title="Angabe von Minuten für Krankenhäuser, in denen die Methode LEP angewendet wird">Summe Gewichtungspunkte**</td>
            <td></td>
        </tr>
        <ui:repeat id="tblNormInt1" value="#{editCalcBasicsPepp.calcBasics.stationServiceCosts}" var="item" varStatus="loop">
            <tr>
                <td>
            <h:commandLink styleClass="colIcon">
                <h:graphicImage alt="#{msg.btnDelete}" name="Icon/small/delete.png" title="#{msg.btnDelete}" value=""/>
                <f:ajax event="click" render="@form :logout:remaining" listener="#{editCalcBasicsPepp.deleteStationServiceCost(item)}"/>
            </h:commandLink>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.costCenterNumber}" pattern="0" id="cstnmb" renderElement="@this tblNormInt2:#{loop.index}:cstnmb:text tblNormInt3:#{loop.index}:cstnmb:text"/>
            </td>
            <td>
            <inek:InputTextWithMessage value="#{item.station}" id="station" renderElement="tblNormInt2:#{loop.index}:station:text tblNormInt3:#{loop.index}:station:text"/>
            </td>
            <td>
            <inek:InputTextWithMessage value="#{item.psyPvMapping}" id="psyPvMapping" />
<!--            <h:outputLabel value="A" for="psychPV_a" />&nbsp;
            <h:selectBooleanCheckbox id="psychPV_a" value="# {item.generalMapping}">
                <f:ajax event="change" render="@form :logout:remaining" />
            </h:selectBooleanCheckbox> <br/>

            <h:outputLabel value="S" for="psychPV_s" /> &nbsp;
            <h:selectBooleanCheckbox id="psychPV_s" value="# {item.addictionMapping}">
                <f:ajax event="change" render="@form :logout:remaining" />
            </h:selectBooleanCheckbox> <br/>

            <h:outputLabel value="G" for="psychPV_g" /> &nbsp;
            <h:selectBooleanCheckbox id="psychPV_g" value="# {item.gerontoPsyMapping}">
                <f:ajax event="change" render="@form :logout:remaining" />
            </h:selectBooleanCheckbox><br/>

            <h:outputLabel value="KJP" for="psychPV_kjp" /> &nbsp;
            <h:selectBooleanCheckbox id="psychPV_kjp" value="# {item.childYouthMapping}">
                <f:ajax event="change" render="@form :logout:remaining" />
            </h:selectBooleanCheckbox><br/>

            <h:outputLabel value="P" for="psychPV_p" /> &nbsp;
            <h:selectBooleanCheckbox id="psychPV_p" value="# {item.psychosomaticMapping}">
                <f:ajax event="change" render="@form :logout:remaining" />
            </h:selectBooleanCheckbox>-->

            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.bedCnt}" isInt="true" renderElement="@this tblNormInt1:#{loop.index}:utilization"/>
            </td>
            <td>
            <h:selectBooleanCheckbox value="#{item.receivingStation}">
                <f:ajax event="change" render="@form :logout:remaining" />
            </h:selectBooleanCheckbox>            
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.regularCareDays}" renderElement="@this tblNormInt1:#{loop.index}:utilization"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.regularWeight}" />
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.intensiveCareDays}" renderElement="@this tblNormInt1:#{loop.index}:utilization"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.intensiveWeight}" renderElement="@this"/>                
            </td>
            <td>
            <h:outputLabel id="utilization" value="#{item.getUtilization()}" />                
            </td>
            </tr>
                        
        </ui:repeat>
        <tr>
            <td colspan="10">
        <h:commandLink styleClass="addButton inputPart" value="#{msg.btnAddEntry}">
            <f:ajax event="click" render="@form :logout:remaining" listener="#{editCalcBasicsPepp.addStationServiceCost()}"/>
        </h:commandLink>
        </td>
        </tr>
    </table>

    <hr/>

    <table id="table2">
        <tr>
            <td></td>
            <td colspan="2" class="centered col-border-bottom col-border-right"></td>
            <td colspan="6" class="centered col-border-bottom col-border-right">Anzahl der zugeordneten VK (nach Personalkostenverrechnung)</td>
        </tr>
        <tr>
            <td></td>
            <td class="centered col-border-right col-border-bottom">Nummer der Kostenstelle</td>
            <td class="centered col-border-right col-border-bottom">Station<br/>(aussagekräftiger Name, Behandlungsschwerpunkt)</td>
            <td class="centered col-border-right col-border-bottom">Ärztlicher Dienst</td>
            <td class="centered col-border-right col-border-bottom">Pflegedienst/Erziehungsdienst</td>
            <td class="centered col-border-right col-border-bottom">Psychologen</td>
            <td class="centered col-border-right col-border-bottom">Sozialarbeiter/Sozial-/Heil-pädagogen</td>
            <td class="centered col-border-right col-border-bottom">Spezialtherapeuten</td>
            <td class="centered col-border-right col-border-bottom">med.-techn. Dienst/Funktionsdienst</td>
        </tr>
        <ui:repeat id="tblNormInt2" value="#{editCalcBasicsPepp.calcBasics.stationServiceCosts}" var="item" varStatus="loop">
            <tr>
                <td>
            <h:commandLink styleClass="colIcon">
                <h:graphicImage alt="#{msg.btnDelete}" name="Icon/small/delete.png" title="#{msg.btnDelete}" value=""/>
                <f:ajax event="click" render="@form :logout:remaining" listener="#{editCalcBasicsPepp.deleteStationServiceCost(item)}"/>
            </h:commandLink>
            </td>
            <td>
            <inek:InputNumberWithMessage id="cstnmb" value="#{item.costCenterNumber}" pattern="0" renderElement="@this tblNormInt1:#{loop.index}:cstnmb:text tblNormInt3:#{loop.index}:cstnmb:text"/>
            </td>
            <td>
            <inek:InputTextWithMessage id="station" value="#{item.station}" renderElement="@this tblNormInt1:#{loop.index}:station:text tblNormInt3:#{loop.index}:station:text"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.medicalServiceCnt}" renderElement="@this"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.nursingServiceCnt}" renderElement="@this"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.psychologistCnt}" renderElement="@this"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.socialWorkerCnt}" renderElement="@this"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.specialTherapistCnt}" renderElement="@this"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.functionalServiceCnt}" renderElement="@this"/>
            </td>
            </tr>
        </ui:repeat>
        <tr>
            <td colspan="8">
        <h:commandLink styleClass="addButton inputPart" value="#{msg.btnAddEntry}">
            <f:ajax event="click" render="@form :logout:remaining" listener="#{editCalcBasicsPepp.addStationServiceCost()}"/>
        </h:commandLink>
        </td>
        </tr>
    </table>

    <hr/>

    <table id="table3">
        <tr>
            <td></td>
            <td colspan="2" class="centered col-border-bottom col-border-right"></td>
            <td colspan="8" class="centered col-border-bottom col-border-right">Kosten der Kostenstelle (nach Personalkostenverrechnung)</td>
        </tr>
        <tr>
            <td></td>
            <td class="centered col-border-right col-border-bottom">Nummer der Kostenstelle</td>
            <td class="centered col-border-right col-border-bottom">Station<br/>(aussagekräftiger Name, Behandlungsschwerpunkt)</td>
            <td class="centered col-border-right col-border-bottom">Ärztlicher Dienst</td>
            <td class="centered col-border-right col-border-bottom">Pflegedienst/Erziehungsdienst</td>
            <td class="centered col-border-right col-border-bottom">Psychologen</td>
            <td class="centered col-border-right col-border-bottom">Sozialarbeiter/Sozial-/Heil-pädagogen</td>
            <td class="centered col-border-right col-border-bottom">Spezialtherapeuten</td>
            <td class="centered col-border-right col-border-bottom">med.-techn. Dienst/Funktionsdienst</td>
            <td class="centered col-border-right col-border-bottom">med. Infrastruktur</td>
            <td class="centered col-border-right col-border-bottom">nicht med. Infrastruktur</td>
        </tr>
        <ui:repeat id="tblNormInt3" value="#{editCalcBasicsPepp.calcBasics.stationServiceCosts}" var="item" varStatus="loop">
            <tr>
                <td>
            <h:commandLink styleClass="colIcon">
                <h:graphicImage alt="#{msg.btnDelete}" name="Icon/small/delete.png" title="#{msg.btnDelete}" value=""/>
                <f:ajax event="click" render="@form :logout:remaining" listener="#{editCalcBasicsPepp.deleteStationServiceCost(item)}"/>
            </h:commandLink>
            </td>
            <td>
            <inek:InputNumberWithMessage id="cstnmb" value="#{item.costCenterNumber}" pattern="0" renderElement="@this tblNormInt1:#{loop.index}:cstnmb:text tblNormInt2:#{loop.index}:cstnmb:text"/>
            </td>
            <td>
            <inek:InputTextWithMessage id="station" value="#{item.station}" renderElement="@this tblNormInt1:#{loop.index}:station:text tblNormInt2:#{loop.index}:station:text"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.medicalServiceAmount}" isInt="true" renderElement="@this"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.nursingServiceAmount}" isInt="true" renderElement="@this"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.psychologistAmount}" isInt="true" renderElement="@this"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.socialWorkerAmount}" isInt="true" renderElement="@this"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.specialTherapistAmount}" isInt="true" renderElement="@this"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.functionalServiceAmount}" isInt="true" renderElement="@this"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.medicalInfrastructureAmount}" isInt="true" renderElement="@this"/>
            </td>
            <td>
            <inek:InputNumberWithMessage value="#{item.nonMedicalInfrastructureAmount}" isInt="true" renderElement="@this"/>
            </td>
            </tr>
        </ui:repeat>
        <tr>
            <td colspan="10">
        <h:commandLink styleClass="addButton inputPart" value="#{msg.btnAddEntry}">
            <f:ajax event="click" render="@form :logout:remaining" listener="#{editCalcBasicsPepp.addStationServiceCost()}"/>
        </h:commandLink>
        </td>
        </tr>
    </table>

</ui:composition>

