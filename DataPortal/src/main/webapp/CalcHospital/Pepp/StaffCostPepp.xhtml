<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>

<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:cb="http://inek.org/dataportal/clientbehaviour"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                xmlns:inek="http://xmlns.jcp.org/jsf/composite/components/common">

    <h2>#{"Gewähltes Verfahren für die Durchführung der Personalkostenverrechnung"}</h2>

    <style>
        .col1 {
            width: 130px;
        }
        .col2 {
            width: auto;
        }
        .col3 {
            width: auto;
        }
        .col4{
            width: auto;
        }
        .col5{
            width: auto;
        }
        .col6{
            width: auto;
        }
        .col7{
            width: auto;
        }
        .col8{
            width: auto;
        }
        .col9{
            width: auto;
        }
        .col10{
            width: auto;
        }
        #personalAccountings th{
            text-align: center;
        }
        #personalAccountings th:first-child{
            text-align: left;
        }
        sup{
            font-size: 9px;
        }
    </style>

   <h:dataTable  id="personalAccountings"
                 value="#{editCalcBasicsPepp.calcBasics.personalAccountings}" var="item" width="100%" rowClasses="row1, row2" 
                  columnClasses="col1, col2 centered, col3 centered, col4 centered, col5 centered, col6 centered, col7 centered, col8 centered, col9 centered, col10 centered"
                  rendered="true"
                  >

       <h:column>
           <f:facet name="header" class="centered">
                <h:outputText value="Kostenartengruppe"/>
            </f:facet>
            <h:outputLabel value="#{item.costType.text}" />
        </h:column>

        <h:column>
            <f:facet name="header">
                <h:outputText value="mitarbeiterbez. Zeiterfassung" title="mitarbeiterbezogene Zeiterfassung"/>
            </f:facet>
            <h:selectBooleanCheckbox value="#{item.staffRecording}">
                <f:ajax event="change" render="@this :logout:remaining" />
            </h:selectBooleanCheckbox>
        </h:column>
        
        <h:column>
            <f:facet name="header">
                <h:outputText value="Stellenplan- auswertung"/>
            </f:facet>
            <h:selectBooleanCheckbox value="#{item.staffEvaluation}">
                <f:ajax event="change" render="@this :logout:remaining" />
            </h:selectBooleanCheckbox>
        </h:column>

        <h:column>
            <f:facet name="header">
                <h:outputText value="Dienstplan- auswertung" />
            </f:facet>
            <h:selectBooleanCheckbox value="#{item.serviceEvaluation}">
                <f:ajax event="change" render="@this :logout:remaining" />
            </h:selectBooleanCheckbox>
        </h:column>
        
       <h:column>
            <f:facet name="header">
                <h:outputText value="Leistungs- statistiken"/><sup>1</sup>
            </f:facet>
           <h:selectBooleanCheckbox value="#{item.serviceStatistic}">
                <f:ajax event="change" render="@form :logout:remaining" />
            </h:selectBooleanCheckbox>
        </h:column>
       
        <h:column>
            <f:facet name="header">
                <h:outputText value="Experten- schätzung"/><sup>1</sup>
            </f:facet>
            <h:selectBooleanCheckbox value="#{item.expertRating}">
                <f:ajax event="change" render="@form :logout:remaining" />
            </h:selectBooleanCheckbox>
        </h:column>
       
       <h:column>
            <f:facet name="header">
                <h:outputText value="Sonstige"/><sup>1</sup>
            </f:facet>
           <h:selectBooleanCheckbox value="#{item.other}">
                <f:ajax event="change" render="@form description :logout:remaining" />
            </h:selectBooleanCheckbox>
        </h:column>

        <h:column>
           <f:facet name="header">
                <h:outputText value="Kostenvolumen"/>
            </f:facet>
            <inek:InputNumberWithMessage value="#{item.amount}" renderElement="@this :personalAccountings:#{editCalcBasicsPepp.calcBasics.personalAccountings.indexOf(item)}:diff:text" />
        </h:column>
       
        <h:column>
           <f:facet name="header">
                <h:outputText value="Kostenvolumen Vorjahr"/>
            </f:facet>
            <inek:InputNumberWithMessage readonly="true" value="#{item.priorCostAmount}" disabled="true"/>
        </h:column>
      
        <h:column>
           <f:facet name="header">
                <h:outputText value="Absolute Abweichung"/>
            </f:facet>
            <inek:InputNumberWithMessage readonly="true" value="#{item.amount - item.priorCostAmount}" id="diff"/>
        </h:column>
       
    </h:dataTable>
    
    <div class="inputPart" jsf:rendered="#{editCalcBasicsPepp.renderPersonalAccountingDescription()}" >
        <sup>1</sup><h:outputLabel styleClass="label" for="description" value="Erläuterung bzgl. Datengrundlage, Vorgehen und Kostenvolumen"/><br/>
        <h:inputTextarea id="description" styleClass="areaWideHigh" value="#{editCalcBasicsPepp.calcBasics.personalAccountingDescription}" required="#{editCalcBasicsPepp.renderPersonalAccountingDescription()}">
            <f:ajax event="blur" render="@this :logout:remaining" />
        </h:inputTextarea>
    </div>
    
</ui:composition>
