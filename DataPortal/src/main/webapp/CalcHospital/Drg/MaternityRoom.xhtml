<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>

<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:cb="http://inek.org/dataportal/clientbehaviour"
                xmlns:inek="http://xmlns.jcp.org/jsf/composite/components"
                xmlns:jsf="http://xmlns.jcp.org/jsf">

    <h2 title="#{msg.titleMaternityRoom}">#{msg.lblCalcMaternityRoom}</h2>

    <inek:LabeledCheckbox label="#{msg.lblHasGynecology}" 
                          styleClassLabel="label60"
                          value="#{editCalcBasicsDrg.calcBasics.gynecology}"
                          renderElement="@form"/>
    <inek:LabeledCheckbox label="#{msg.lblHasObstetrical}" 
                          styleClassLabel="label60"
                          value="#{editCalcBasicsDrg.calcBasics.obstetrical}"
                          renderElement="@form"/>

    <div jsf:id="maternity" jsf:rendered="#{editCalcBasicsDrg.calcBasics.gynecology 
                                            || editCalcBasicsDrg.calcBasics.obstetrical}">
        <h2>Erbrachte Leistungen</h2>

        <table cellspacing="5">
            <thead>
            <th></th>
            <th>#{editCalcBasicsDrg.calcBasics.dataYear}</th>
            <th>#{editCalcBasicsDrg.calcBasics.dataYear-1}</th>
            <th>Abweichung</th>
            <th></th>
            </thead>
            <tr>
                <td>
                    <span class="label">Summe der Aufenthaltszeit der Patientin im Kreißsaal in Stunden (ausschließlich für vollstationäre Patientinnen)</span>
                </td>
                <td>
            <h:inputText styleClass="inputshort" id="deliveryRoomHours" value="#{editCalcBasicsDrg.calcBasics.deliveryRoomHours}" required="true">
                <f:ajax event="blur" render="@form :logout:remaining" />
            </h:inputText>
            </td>
            <td>
                #{editCalcBasicsDrg.priorCalcBasics.deliveryRoomHours}
            </td>
            <td>
                #{editCalcBasicsDrg.priorCalcBasics.deliveryRoomHours - editCalcBasicsDrg.calcBasics.deliveryRoomHours}
            </td>
            </tr>

            <tr>
                <td>
                    <span class="label">davon für vorgeburtliche Kreißsaalaufenthalte</span>
                </td>
                <td>
            <h:inputText styleClass="inputshort" id="preBirthHabitationCnt" value="#{editCalcBasicsDrg.calcBasics.deliveryRoomPreBirthHabitationCnt}" required="true">
                <f:ajax event="blur" render="@form :logout:remaining" />
            </h:inputText>
            </td>
            <td>
                #{editCalcBasicsDrg.priorCalcBasics.deliveryRoomPreBirthHabitationCnt}
            </td>
            <td>
                #{editCalcBasicsDrg.priorCalcBasics.deliveryRoomPreBirthHabitationCnt - editCalcBasicsDrg.calcBasics.deliveryRoomPreBirthHabitationCnt}
            </td>
            </tr>

            <tr>
                <td>
                    <span class="label">Anzahl vollstationär geborener Kinder </span>
                </td>
                <td>
            <h:inputText styleClass="inputshort" id="instationBirthCnt" value="#{editCalcBasicsDrg.calcBasics.deliveryRoomInstationBirthCnt}" required="true">
                <f:ajax event="blur" render="@form :logout:remaining" />
            </h:inputText>
            </td>
            <td>
                #{editCalcBasicsDrg.priorCalcBasics.deliveryRoomInstationBirthCnt}
            </td>
            <td>
                #{editCalcBasicsDrg.priorCalcBasics.deliveryRoomInstationBirthCnt - editCalcBasicsDrg.calcBasics.deliveryRoomInstationBirthCnt}
            </td>
            </tr>

        </table>


        <h2>Kostenstellen der erbrachten Leistungen</h2>
        <inek:LabeledText label="#{msg.lblCardiologyRoomCount}" 
                          styleClassLabel="label40"
                          value="#{editCalcBasicsDrg.calcBasics.cardiologyRoomCnt}" 
                          singleLine="true" 
                          styleClass="inputSmall"/>

        <inek:LabeledText label="#{msg.lblCardiologyCaseCount}" 
                          styleClassLabel="label40"
                          value="#{editCalcBasicsDrg.calcBasics.cardiologyCaseCnt}" 
                          singleLine="true" 
                          styleClass="inputSmall"/>

        <h2>#{msg.lblTopMaternityService} #{editCalcBasicsDrg.calcBasics.dataYear}</h2>

        <h:dataTable value="#{editCalcBasicsDrg.calcBasics.kstTop.stream().filter(i -> i.ktCostCenterID == 6).toList()}" var="item">
            <h:column>
                <f:facet name="header">#{msg.lblNotation}</f:facet>
                <inek:InputTextWithMessage value="#{item.text}"/>
            </h:column>
            <h:column>
                <f:facet name="header">#{msg.lblCaseCount}</f:facet>
                <inek:InputTextWithMessage value="#{item.caseCount}"/>
            </h:column>
            <h:column>
                <f:facet name="header">#{msg.lblRevenueVolume}</f:facet>
                <inek:InputTextWithMessage value="#{item.delimitationAmount}"/>
            </h:column>
            <h:column>
                <f:facet name="header">#{msg.lblMarkedOfCostVolume}</f:facet>
                <inek:InputTextWithMessage value="#{item.amount}"/>
            </h:column>
        </h:dataTable>

        <h:panelGroup rendered="#{editCalcBasicsDrg.priorCalcBasics.kstTop.stream().filter(i -> i.ktCostCenterID == 6).count() > 0}">
            <h2>#{msg.lblTopMaternityService} #{editCalcBasicsDrg.calcBasics.dataYear - 1}</h2>

            <h:dataTable value="#{editCalcBasicsDrg.priorCalcBasics.kstTop.stream().filter(i -> i.ktCostCenterID == 6).toList()}" var="item">
                <h:column>
                    <f:facet name="header">#{msg.lblNotation}</f:facet>
                    <h:inputText value="#{item.text}" disabled="true"/>
                </h:column>
                <h:column>
                    <f:facet name="header">#{msg.lblCaseCount}</f:facet>
                    <h:inputText value="#{item.caseCount}" disabled="true"/>
                </h:column>
                <h:column>
                    <f:facet name="header">#{msg.lblRevenueVolume}</f:facet>
                    <h:inputText value="#{item.delimitationAmount}" disabled="true"/>
                </h:column>
                <h:column>
                    <f:facet name="header">#{msg.lblMarkedOfCostVolume}</f:facet>
                    <h:inputText value="#{item.amount}" disabled="true"/>
                </h:column>
            </h:dataTable>
        </h:panelGroup>
    </div>


</ui:composition>

