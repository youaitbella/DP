<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:cb="http://inek.org/dataportal/clientbehaviour"
      xmlns:inek="http://xmlns.jcp.org/jsf/composite/components/common"
      >

    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="patType" default="Adults"/>
        <cc:attribute name="readonly" default="false"/>
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
        <h2>Tatsächliche Stellenbesetzung in Vollkräften - Bereich #{'Adults'.equals(cc.attrs.patType) ? 'Erwachsene' : 'Kinder und Jugendliche'}</h2>
        <span>(§ 4 Psych-Personalnachweis)</span>

        <h:dataTable value="#{editPsyStaff.staffProof.getStaffProofsEffective(cc.attrs.patType)}" 
                     columnClasses="colValue, colValue, col04em, col04em, col04em, col04em, col04em"
                     var="item">
            
            <h:column>
                <f:facet name="header">
                    Personalgruppen
                </f:facet>
                #{item.occupationalCatagory.personnelGroup.name}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Berufsgruppen der Psych-PV
                </f:facet>
                #{item.occupationalCatagory.name}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Psych-PV-Personal in VK (jeweils in Summe)
                </f:facet>
                <h:inputText value="#{item.staffingComplete}">
                    <f:ajax render="factor"/>
                </h:inputText>
            </h:column>

            <h:column>
                <f:facet name="header">
                    Anrechnung Fachkräfte anderer Berufsgruppen der Psych-PV in VK (§4 Abs. 4 Vereinb.)
                </f:facet>
                <h:inputText value="#{item.staffingDeductionPsych}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    Anrechnung Fachkräfte Nicht-Psych-PV Berufsgruppen in VK (§4 Abs. 5 Vereinb.)
                </f:facet>
                <h:inputText value="#{item.staffingDeductionNonPsych}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    Anrechnung Fachkräfte ohne direktes Beschäftigungsverh. in VK (§4 Abs. 6 Vereinb.)
                </f:facet>
                <h:inputText value="#{item.staffingDeductionOhter}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    Psych-PV-Personal in VK (jeweils in Summe)
                </f:facet>
                <h:outputText id="factor" value="#{item.staffingComplete / 3}"/>
            </h:column>

        </h:dataTable>

        <inek:LabeledText label="Tatsächliche Berechnungstage (#{editPsyStaff.staffProof.calculationType == '1' ? 'PEPPV' : 'BPflV/LKA'})"
                          value="#{'Adults'.equals(cc.attrs.patType) ? editPsyStaff.staffProof.adultsEffectiveDays : editPsyStaff.staffProof.kidsEffectiveDays}"
                          styleClass="inputSmall"/>

        <inek:LabeledText label="Tatsächliche Kosten für das Psych-PV-Personal in Summe nach § 5 in Euro"
                          value="#{'Adults'.equals(cc.attrs.patType) ? editPsyStaff.staffProof.adultsEffectiveCosts : editPsyStaff.staffProof.kidsEffectiveCosts}"
                          styleClass="inputSmall"/>
    </cc:implementation>
</html>
