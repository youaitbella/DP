<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                template="UserMaintenanceTemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core">
    <ui:define name="maintenanceContent">
            <p>
            <h:outputLabel styleClass="label fakeRequired" for="oldPassword" value="#{msg.lblOldPassword}:"/>
            <h:message for="oldPassword" id="msgOldPassword" styleClass="errorMessage"/>
            <br/>
            <!-- required = false to prevent checks when switching the tab -->
            <h:inputSecret styleClass="input fakeRequired" id="oldPassword" value="#{editUserMaintenance.oldPassword}" requiredMessage="#{msg.msgValueNeeded}" 
                           redisplay="true" maxlength="50">
            </h:inputSecret>
            </p>
            <p>
                <h:outputLabel styleClass="label fakeRequired" for="password" value="#{msg.lblNewPassword}:"/>
                <h:message for="password" id="msgPassword" styleClass="errorMessage"/>
                <br/>
                <h:inputSecret styleClass="input fakeRequired" id="password" value="#{editUserMaintenance.newPassword}" requiredMessage="#{msg.msgValueNeeded}" 
                               redisplay="true" maxlength="50">
                </h:inputSecret>
            </p>
            <p>
                <h:outputLabel styleClass="label fakeRequired" for="repeatPassword" value="#{msg.lblRepeatPassword}:"/>
                <h:message id="msgRepeatPassword" for="repeatPassword" styleClass="errorMessage"/>
                <br/>
                <h:inputSecret styleClass="input fakeRequired" id="repeatPassword" value="#{editUserMaintenance.repeatPassword}" requiredMessage="#{msg.msgValueNeeded}" 
                               redisplay="true" maxlength="50"
                               validator="#{editUserMaintenance.checkPassword}">
                </h:inputSecret>
            </p>

            <p>
                <h:outputText styleClass="warningText" value="#{msg.msgDataChanged}" rendered="#{editUserMaintenance.mofified}"/>
                <div class="toolBar">
                    <h:commandLink styleClass="bigButton" action="#{editUserMaintenance.savePassword}" value="#{msg.btnSave}" immediate="false" />
                </div>
            </p>
            
        <hr />

            #{msg.msgChangeMail}
            <br/>
            <p>
                <h:outputLabel styleClass="label" for="currentEmail" value="#{msg.lblCurrentMail}:"/>
                <br/>
                <h:outputText styleClass="input" id="currentEmail" value="#{editUserMaintenance.account.email}"/>
            </p>

            <p>
                <h:outputLabel styleClass="label" for="email" value="#{msg.lblNewMail}:"/>
                <h:message for="email" id="msgEmail" styleClass="errorMessage"/>
                <br/>
                <h:inputText styleClass="input" id="email" value="#{editUserMaintenance.email}"
                             validator="#{editUserMaintenance.checkEmail}" maxlength="50"
                             title="#{msg.tipEmail}">
                    <f:ajax event="blur" render="@this :logout:remaining msgEmail"/>
                </h:inputText>
            </p>
            
            <p>
                <h:outputText styleClass="warningText" value="#{msg.msgDataChanged}" rendered="#{editUserMaintenance.mofified}"/>
                <div class="toolBar">
                    <h:commandLink styleClass="bigButton" action="#{editUserMaintenance.saveEmail}" value="#{msg.btnSendConfirm}" immediate="false" />
                </div>
            </p>
        
        <hr />
        

        <h:commandLink styleClass="bigButton" action="#{editUserMaintenance.requestDelete}" value="#{msg.btnDeleteAccount}" immediate="true" />
        <h:commandLink id="deleteAccount" style="display: none" action="#{editUserMaintenance.delete}" value="delete"/>
        <br/>
        <br/>
        <h:outputLabel styleClass="label" value="#{msg.msgDeleteAccount}"/>

    </ui:define>
</ui:composition>

