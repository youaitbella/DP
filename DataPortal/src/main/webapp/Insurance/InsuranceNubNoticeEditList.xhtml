<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="InsuranceNubNoticeEdit.xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:inek="http://xmlns.jcp.org/jsf/composite/components"
                xmlns:cb="http://inek.org/dataportal/clientbehaviour"
                >

    <ui:define name="editContent">
        <h2>Test</h2>
        <h:form id="costUploadForm" rendered="#{!editInsuranceNubNotice.readOnly}" enctype="multipart/form-data" >
            <div class="uploadFile">
                <h:inputFile styleClass="hiddenFile" id="file" value="#{editInsuranceNubNotice.file}" title="#{msg.btnUploadMessage}">
                    <f:ajax listener="#{editInsuranceNubNotice.uploadMessages()}" render="messageForm"/>
                </h:inputFile>
                <div class="fakeFile">
                    <h:outputLabel styleClass="button" value="#{msg.btnUploadMessage}"/>
                </div>
            </div>
        </h:form>

        <h:form id="messageForm">
            <h:dataTable  headerClass="list-header" 
                          value="#{editInsuranceNubNotice.notice.items}" var="item" width="100%" rowClasses="row1, row2" 
                          columnClasses="colIcon, colValue">

                <h:column>
                    <f:facet name="header">
                        <h:outputText value=""/>
                    </f:facet>
                    <h:commandLink action="#{editInsuranceNubNotice.deleteItem(item)}" immediate="true" >
                        <h:graphicImage alt="#{msg.btnDelete}" name="Icon/small/delete.png" title="#{msg.btnDelete}" value=""/>
                        <cb:confirmDelete/>
                    </h:commandLink>
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:outputText value="#{msg.lblNubId}"/>
                    </f:facet>
                    <h:inputText value="#{item.externalId}">
                        <f:ajax render="@this :logout:remaining "/>
                    </h:inputText>
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:outputText value="#{msg.lblName}"/>
                    </f:facet>
                    <h:inputText value="#{item.externalId}">
                        <f:ajax render="@this :logout:remaining "/>
                    </h:inputText>
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:outputText value="#{msg.lblDosageForm}"/>
                    </f:facet>
                    <h:selectOneMenu value="#{item.dosageFormId}" hideNoSelectionOption="true">
                        <f:selectItem itemLabel="#{msg.lblChooseEntryShort}" itemValue="#{0}" noSelectionOption="true"/>
                        <f:selectItems value="#{editInsuranceNubNotice.dosageForms}" var="dosageForm" itemLabel="#{dosageForm.text}" itemValue="#{dosageForm.id}"/>
                        <f:ajax render="@this :logout:remaining"/>
                    </h:selectOneMenu>
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:outputText value="#{msg.lblAmount}"/>
                    </f:facet>
                    <h:inputText value="#{item.amount}">
                        <f:ajax render="@this :logout:remaining "/>
                    </h:inputText>
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:outputText value="#{msg.lblUnit}"/>
                    </f:facet>
                    <h:selectOneMenu value="#{item.unitId}" hideNoSelectionOption="true">
                        <f:selectItem itemLabel="#{msg.lblChooseEntryShort}" itemValue="#{0}" noSelectionOption="true"/>
                        <f:selectItems value="#{editInsuranceNubNotice.units}" var="unit" itemLabel="#{unit.text}" itemValue="#{unit.id}"/>
                        <f:ajax render="@this :logout:remaining"/>
                    </h:selectOneMenu>
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:outputText value="#{msg.lblCount}"/>
                    </f:facet>
                    <h:inputText value="#{item.quantity}">
                        <f:ajax render="@this :logout:remaining "/>
                    </h:inputText>
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:outputText value="#{msg.lblPrice}"/>
                    </f:facet>
                    <h:inputText value="#{item.price}">
                        <f:ajax render="@this :logout:remaining "/>
                    </h:inputText>
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:outputText value="#{msg.lblRemunerationCode}"/>
                    </f:facet>
                    <h:inputText value="#{item.remunerationTypeId}">
                        <f:ajax render="@this :logout:remaining "/>
                    </h:inputText>
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:outputText value="#{msg.lblProcedures}"/>
                    </f:facet>
                    <h:inputText value="#{item.procedures}">
                        <f:ajax render="@this :logout:remaining "/>
                    </h:inputText>
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:outputText value="#{msg.lblComment}"/>
                    </f:facet>
                    <h:inputText value="#{item.note}">
                        <f:ajax render="@this :logout:remaining "/>
                    </h:inputText>
                </h:column>

            </h:dataTable>


            <h:commandLink id="addButton" styleClass="addButton inputPart" value="#{msg.btnAddEntry}"
                           rendered="#{!editInsuranceNubNotice.readOnly}">
                <f:ajax event="click" render="@form :logout:remaining" listener="#{editInsuranceNubNotice.addItem}"/>
            </h:commandLink>
        </h:form>

    </ui:define>
</ui:composition>
