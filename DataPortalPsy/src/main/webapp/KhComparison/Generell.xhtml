<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                xmlns:inek="http://xmlns.jcp.org/jsf/composite/components/Input"
                xmlns:inekold="http://xmlns.jcp.org/jsf/composite/components/common"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:pf="http://primefaces.org/ui">

    <pf:panelGrid columns="2" >

        <pf:outputLabel value="IK:" />
        <pf:selectOneMenu value="#{edit.aebBaseInformation.ik}"
                          var="ik"
                          disabled="#{edit.isReadOnly()}">
            <f:selectItem rendered="#{edit.aebBaseInformation.ik eq 0}" itemLabel="#{edit.aebBaseInformation.ik}" itemValue="#{edit.aebBaseInformation.ik}" noSelectionOption="true" />
            <f:selectItems value="#{edit.allowedIks}" />
            <pf:ajax event="change" listener="#{edit.ikChanged()}" update="year" />
        </pf:selectOneMenu>

        <pf:outputLabel value="Vereinbahrungsjahr:" />
        <pf:selectOneMenu id="year"
                          value="#{edit.aebBaseInformation.year}"
                          disabled="#{edit.isReadOnly()}">
            <f:selectItem rendered="#{edit.aebBaseInformation.year eq 0}" itemLabel="#{edit.aebBaseInformation.year}" itemValue="#{edit.aebBaseInformation.year}" noSelectionOption="true" />
            <f:selectItems value="#{edit.validDatayears}" />
            <pf:ajax event="change" />
        </pf:selectOneMenu>
    </pf:panelGrid>
    <h3 jsf:rendered="#{!edit.isReadOnly()}">
        AEB aus Excel importieren
    </h3>
    <pf:fileUpload styleClass="inekUploader"
                   rendered="#{!edit.isReadOnly()}"
                   fileUploadListener="#{edit.handleFileUpload}"
                   mode="advanced"
                   fileLimit="1"
                   fileLimitMessage="Es darf nur eine Datei hochgeladen werden"
                   invalidFileMessage="Es dürfen nur Excel Dateien hochgeladen werden"
                   allowTypes="/(\.|\/)(xlsx|xls)$/"
                   cancelLabel="Abbrechen"
                   uploadLabel="Datei Hochladen"
                   label="Exceldatei auswählen"/>

</ui:composition>
