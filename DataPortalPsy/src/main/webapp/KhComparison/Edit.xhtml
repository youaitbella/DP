<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/Templates/PortalMenuTemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:pf="http://primefaces.org/ui">


    <ui:define name="content">
        <h:form>
            <h1>
                <h:commandLink value="Datenerfassung f체r den Krankenhausvergleich"
                               action="#{sessionController.navigate(sessionTools.pages.KhComparisonSummary)}"
                               immediate="true" onclick="PF('navigationDialog').show();"/>
            </h1>
        </h:form>
        <h:form>
            <pf:messages>
                <pf:autoUpdate />
            </pf:messages>

            <pf:dialog widgetVar="errorMessageDialog"
                       header="Unplausible Daten"
                       modal="true"
                       closable="true"
                       resizable="true">

                <div>
                    Folgende Fehler wurden gefunden. Bitte 체berpr체fen Sie, ob die eingegeben Daten richtig sind.
                </div>

                <div>
                    <pf:inputTextarea value="#{edit.hintMessage}"
                                      style="width: 100%; max-height: 500px" />

                </div>

                <pf:commandButton styleClass="btnPsy"
                                  value="Abbrechen"
                                  action="PF('errorMessageDialog').hide();"/>

                <pf:commandButton styleClass="btnSend arrow-right"
                                  value="Absenden mit Fehlermeldungen"
                                  action="#{edit.saveWithHintMessages()}"
                                  update="@form"/>


            </pf:dialog>

            <pf:dialog widgetVar="dialogProcess"
                       header="Daten werden verarbeitet"
                       modal="true"
                       closable="false"
                       resizable="false"
                       height="80px">
                <div style="text-align: center; width: 100%;">
                    <div class="inekLoader" style="text-align: center;">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                </div>
            </pf:dialog>

            <div class="headerInformation">
                <ui:include src="Generell.xhtml" />
            </div>
            <pf:tabView styleClass="featureTabs" dynamic="true">
                <pf:tab title="AEB">
                    <ui:include src="Aeb/AebSummary.xhtml" />
                </pf:tab>
                <pf:tab title="Personalausstattung Psychosomatik">
                    <ui:include src="PersonalAgreed.xhtml" />
                </pf:tab>
                <pf:tab title="Regionale und Strukturelle Besonderheiten">
                    <ui:include src="RegionStructurParticularities.xhtml" />
                </pf:tab>
                <pf:tab title="(Fallback) Kalkulationsunterlagen">
                    <ui:include src="CalcDocuments.xhtml" />
                </pf:tab>
            </pf:tabView>
            <div class="footerInformation">
                <pf:commandButton styleClass="btnPsy"
                                  value="Datensatz 채ndern"
                                  action="#{edit.change()}"
                                  update="@form"
                                  rendered="#{edit.isChangeAllowed()}"/>
                <pf:commandButton styleClass="btnPsy"
                                  value="Speichern"
                                  onstart="PF('dialogProcess').show()"
                                  oncomplete="PF('dialogProcess').hide()"
                                  action="#{edit.saveAeb()}"
                                  update="@(.ui-message) @form"
                                  rendered="#{edit.isSendAllowed()}"/>
                <pf:commandButton value="Ans InEK senden"
                                  update="@(.ui-message) @form"
                                  onstart="PF('dialogProcess').show()"
                                  oncomplete="PF('dialogProcess').hide()"
                                  action="#{edit.send()}"
                                  styleClass="btnSend arrow-right"
                                  rendered="#{edit.isSendAllowed()}"/>
            </div>

        </h:form>
    </ui:define>

</ui:composition>
