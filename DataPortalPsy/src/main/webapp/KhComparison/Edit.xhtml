<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/Templates/PortalMenuTemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:pf="http://primefaces.org/ui">


    <ui:define name="content">
        <h:form>
            <h1>
                <h:commandLink value="Datenerfassung für den Krankenhausvergleich"
                               action="#{sessionController.navigate(sessionTools.pages.KhComparisonSummary)}"
                               immediate="true" onclick="PF('navigationDialog').show();" />
            </h1>
        </h:form>
        <h:form>
            <pf:messages>
                <pf:autoUpdate />
            </pf:messages>

            <pf:dialog widgetVar="errorMessageDialog"
                       header="Auffällige Daten"
                       modal="true"
                       width="40%"
                       closable="true"
                       resizable="true">

                <div>
                    Folgende Auffälligkeiten wurden gefunden. Bitte überprüfen Sie, ob die eingegeben Daten richtig sind, und bestätigen Sie die Eingabe.
                </div>

                <br />

                <pf:inputTextarea value="#{edit.hintMessage}"
                                  style="width: 100%; height: 70%" />
                <div style="position: relative; height: 100%; width: 100%">
                    <pf:button styleClass="btnPsy"
                               value="Abbrechen"
                               style="position: relative; right: 10; left: 10"
                               onclick="PF('errorMessageDialog').hide();" />

                    <pf:commandButton styleClass="btnSend arrow-right"
                                      value="Eingabe bestätigen"
                                      action="#{edit.send(true)}"
                                      style="position: relative; right: 10; left: 10"
                                      oncomplete="PF('errorMessageDialog').hide();"
                                      update="@form" />
                </div>

            </pf:dialog>

            <pf:dialog widgetVar="dialogProcess"
                       header="Daten werden verarbeitet"
                       modal="true"
                       closable="false"
                       resizable="false"
                       height="80px">
                <div style="text-align: center; width: 100%;">
                    <div class="inekLoader" style="text-align: center;">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                </div>
            </pf:dialog>

            <div class="headerInformation">
                <ui:include src="Generell.xhtml" />
            </div>
            <pf:tabView styleClass="featureTabs" dynamic="true">
                <pf:tab title="AEB">
                    <ui:include src="Aeb/AebSummary.xhtml" />
                </pf:tab>
                <pf:tab title="Personalausstattung Psychosomatik">
                    <ui:include src="PersonalAgreed.xhtml" />
                </pf:tab>
                <pf:tab title="Regionale und Strukturelle Besonderheiten">
                    <ui:include src="RegionStructurParticularities.xhtml" />
                </pf:tab>
                <pf:tab title="(Fallback) Kalkulationsunterlagen">
                    <ui:include src="CalcDocuments.xhtml" />
                </pf:tab>
            </pf:tabView>
            <div class="footerInformation">
                <pf:commandButton styleClass="btnPsy"
                                  value="Datensatz ändern"
                                  action="#{edit.change()}"
                                  update="@form"
                                  rendered="#{edit.isChangeAllowed()}" />
                <pf:commandButton styleClass="btnPsy"
                                  value="Speichern"
                                  onstart="PF('dialogProcess').show()"
                                  oncomplete="PF('dialogProcess').hide()"
                                  action="#{edit.saveAeb()}"
                                  update="@(.ui-message) @form"
                                  rendered="#{edit.isSendAllowed()}" />
                <pf:commandButton value="Ans InEK senden"
                                  update="@(.ui-message) @form"
                                  onstart="PF('dialogProcess').show()"
                                  oncomplete="PF('dialogProcess').hide()"
                                  action="#{edit.send(false)}"
                                  styleClass="btnSend arrow-right"
                                  rendered="#{edit.isSendAllowed()}" />
            </div>

        </h:form>
    </ui:define>

</ui:composition>
