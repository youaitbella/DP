<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                template="UserMaintenanceTemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:cb="http://inek.org/dataportal/clientbehaviour"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:define name="maintenanceContent">

        <table class="fullWidth" jsf:id="tblAdditionalIKs" >
            <thead>
                <tr>
                    <th scope="col"></th>
                    <th scope="col">#{msg.lblIkShort}</th>
                    <th scope="col">#{msg.lblDescription}</th>
                </tr>
            </thead>
            <tbody>
                <c:forEach items="#{editUserMaintenance.additionalIKs}" var="ik" varStatus="status">
                    <tr>

                        <td class="colIcon alignBottom">
                            <h:commandLink action="#{editUserMaintenance.removeAdditionalIK(ik)}" >
                                <h:graphicImage alt="löschen" name="delete.png" library="Icon/small" title="Löschen" value=""/>
                                <f:ajax event="blur" render="tblAdditionalIKs :logout:remaining"/>
                            </h:commandLink>
                        </td>

                        <td class="col14 alignBottom">
                            <h:panelGrid columns="1">
                                <h:message id="msgIk#{status.index}" for="ik#{status.index}" styleClass="errorMessage"/>
                                <h:inputText id="ik#{status.index}" value="#{ik}">
                                    <f:validator validatorId="IkValidator" />
                                    <f:converter converterId="IntegerConverter" />
                                    <f:ajax event="blur" render="@this msgIk#{status.index} name#{status.index} :logout:remaining"/>
                                </h:inputText>
                            </h:panelGrid>
                        </td>

                        <td class="colValue alignBottom">
                             <h:outputText  id="name#{status.index}" value="#{editUserMaintenance.getIkName(ik)}"/>
                        </td>

                    </tr>
                </c:forEach>
            </tbody>
        </table>        

        <br/>

        <h:commandLink id="addButton" styleClass="button addIcon" value="#{msg.btnAddIK}">
            <f:ajax event="click" render="tblAdditionalIKs :logout:remaining" listener="#{editUserMaintenance.addAdditionalIK()}"/>
        </h:commandLink>

        <h:outputText styleClass="warningText" value="#{msg.msgDataChanged}" rendered="#{editUserMaintenance.mofified}"/>
        <div class="toolBar">
            <h:commandLink styleClass="button" action="#{editUserMaintenance.saveIks}" value="#{msg.btnSave}" immediate="false" />
            <h:commandLink styleClass="button" action="#{editUserMaintenance.discardChanges}" value="#{msg.btnDiscard}" immediate="true" />
        </div>

    </ui:define>
</ui:composition>
