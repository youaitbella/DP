<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                template="DrgProposalEdit.xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:inek="http://java.sun.com/jsf/composite/org/inek"
                >
    <ui:define name="editContent">



        <h:panelGroup styleClass="inputPart" rendered="#{editDrgProposal.system}">
            <h:outputLabel styleClass="label" for="drg" value="#{msg.lblReferencedDrg}:"/>
            <br/>
            <h:inputTextarea  styleClass="areaNarrowLow" id="drg"
                              value="#{editDrgProposal.drgProposal.drg}"
                              readonly="#{editDrgProposal.readOnly}"
                              required="false" requiredMessage="#{msg.msgValueNeeded}">
                <f:validateLength maximum="500"/>
                <f:ajax event="blur" render="@this :logout:remaining msgDrg"/>
            </h:inputTextarea>
            <h:commandButton styleClass="button rightAllign" action="#{editDrgProposal.searchDrg()}"
                             immediate="true" value="#{msg.btnCallSearch}"/>
            <h:message for="drg" id="msgDrg" styleClass="errorMessage"/>
                    <hr/>

        </h:panelGroup>

        <div class="inputPart marginTop">
            <div style="float:left;">
                <h:outputLabel styleClass="label" for="drgDiags" value="#{msg.lblDiagRelated}"/>
                <br/>
                <h:inputTextarea styleClass="areaMiddleFixLow" id="drgDiags"
                                 readonly="#{editDrgProposal.readOnly}"
                                 value="#{editDrgProposal.drgProposal.diagCodes}"
                                 validator="#{editDrgProposal.checkDiagnosisCodes}">
                    <f:validateLength maximum="500"/>
                    <f:ajax event="blur" render="@this msgCheckDiags"/>
                </h:inputTextarea>
            </div>
            
            <div style="float: left;">
                
                <h:selectOneMenu styleClass="comboMiddleFixLow" id="changeMethodDiag" value="#{editDrgProposal.drgProposal.changeMethodDiag}" 
                             required="#{!editDrgProposal.readOnly}" requiredMessage="#{msg.lblChooseEntry}" 
                             immediate="true"
                             title="#{msg.titleCategory}"
                             readonly="#{editDrgProposal.readOnly}"

                             >
                    <f:selectItems value="#{editDrgProposal.changeMethodDiag}"/>
                    <f:ajax event="change" render="@all :logout:remaining msgCategory"/>
                    <f:ajax event="blur" render="@this :logout:remaining msgCategory"/>
                </h:selectOneMenu>
                <h:commandButton styleClass="button rightAllign" action="#{editDrgProposal.searchDiag()}"
                             immediate="true" value="#{msg.btnCallSearch}"/>
                <h:message for="drgDiags" id="msgCheckDiags" styleClass="errorMessage"/>
            </div>
        </div>
        
        <div class="inputPart" style="clear: left;">
            <h:outputLabel styleClass="label" for="diags" value="#{msg.lblDiagDescriptionWhatToDo}"/>
            <h:message for="diags" id="msgDiags" styleClass="errorMessage"/>
            <br/>
            <h:inputTextarea  styleClass="areaWideLow" id="diags"
                              readonly="#{editDrgProposal.readOnly}"
                              value="#{editDrgProposal.drgProposal.diags}">
                <f:validateLength maximum="500"/>
                <f:ajax event="blur" render="@this :logout:remaining msgDiags"/>
            </h:inputTextarea>
        </div>

        <hr/>

        <div class="inputPart">
            <h:outputLabel styleClass="label" for="drgProcs" value="#{msg.lblProcRelated}"/>
            <br/>
            <h:inputTextarea styleClass="areaNarrowLow" id="drgProcs"
                             readonly="#{editDrgProposal.readOnly}"
                             value="#{editDrgProposal.drgProposal.procs}"
                             validator="#{editDrgProposal.checkProcedureCodes}">
                <f:validateLength maximum="500"/>
                <f:ajax event="blur" render="@this msgCheckProcs"/>
            </h:inputTextarea>
            
            <h:selectOneMenu styleClass="input" id="changeMethodProc" value="#{editDrgProposal.drgProposal.changeMethodProc}" 
                         required="#{!editDrgProposal.readOnly}" requiredMessage="#{msg.lblChooseEntry}" 
                         immediate="true"
                         title="#{msg.titleCategory}"
                         readonly="#{editDrgProposal.readOnly}">
            <f:selectItems value="#{editDrgProposal.changeMethodProc}"/>
            <f:ajax event="change" render="@all :logout:remaining msgCategory"/>
            <f:ajax event="blur" render="@this :logout:remaining msgCategory"/>
             </h:selectOneMenu>
            <h:commandButton styleClass="button rightAllign" action="#{editDrgProposal.searchProc()}"
                             immediate="true" value="#{msg.btnCallSearch}"/>
            <h:message for="drgProcs" id="msgCheckProcs" styleClass="errorMessage"/>
        </div>

        <!--inek:expandingTable /-->

        <div class="inputPart">
            <h:outputLabel styleClass="label" for="procs" value="#{msg.lblProcDescriptionWhatToDo}"/>
            <h:message for="procs" id="msgProcs" styleClass="errorMessage"/>
            <br/>
            <h:inputTextarea  styleClass="areaWideLow" id="procs"
                              readonly="#{editDrgProposal.readOnly}"
                              value="#{editDrgProposal.drgProposal.procsText}">
                <f:validateLength maximum="500"/>
                <f:ajax event="blur" render="@this :logout:remaining msgProcs"/>
            </h:inputTextarea>
        </div>

        <div class="inputPart">

        </div>
    </ui:define>
</ui:composition>

