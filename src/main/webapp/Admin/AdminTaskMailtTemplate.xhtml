<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="AdminTask.xhtml"
                xmlns:cb="http://inek.org/dataportal/clientbehaviour"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <ui:define name="editContent">


        <h:form id="maiTemplateForm">
            <h:outputLabel for="mnuTemplate" value="#{msg.lblMailTemplate}"/>
            <h:selectOneMenu id="mnuTemplate" styleClass="inputwide" value="#{adminTask.templateId}" immediate="true" disabled="#{adminTask.templateChanged}">
                <f:selectItems value="#{adminTask.mailTemplates}" var="template" itemLabel="#{template.label}" itemValue="#{template.value}"/>
                <f:ajax render="@form" />
            </h:selectOneMenu>

            <hr/>

            <div class="inputPart">
                <h:outputLabel for="txtTemplateName" value="#{msg.lblName}"/>
                <h:message for="txtTemplateName" id="msgTemplateName" styleClass="errorMessage"/>
                <h:inputText id="txtTemplateName"
                             value="#{adminTask.mailTemplate.name}"
                             styleClass="inputwide"
                             required="true"
                             disabled="#{adminTask.mailTemplate == null}">
                    <f:ajax render="@this msgTemplateName mnuTemplate btnMailTemplateSave :logout:remaining" listener="#{adminTask.mailTemplateChangeListener}"/>
                </h:inputText>
            </div>

            <div class="inputPart">
                <h:outputLabel for="mnuFeature" value="#{msg.lblFeature}"/>
                <h:message for="mnuFeature" id="msgFeature" styleClass="errorMessage"/>
                <h:selectOneMenu id="mnuFeature"
                                 styleClass="inputwide"
                                 value="#{adminTask.mailTemplate.feature}"
                                 required="true"
                                 disabled="#{adminTask.mailTemplate == null}">
                    <f:selectItems value="#{valueLists.features}" var="feature" itemLabel="#{feature.label}" itemValue="#{feature}"/>
                    <f:ajax render="@this msgFeature mnuTemplate btnMailTemplateSave :logout:remaining" listener="#{adminTask.mailTemplateChangeListener}"/>
                </h:selectOneMenu>
            </div>

            <div class="inputPart">
                <h:outputLabel for="txtBcc" value="#{msg.lblBcc}"/>
                <h:message for="txtBcc" id="msgBcc" styleClass="errorMessage"/>
                <h:inputText id="txtBcc"
                             value="#{adminTask.mailTemplate.bcc}"
                             styleClass="inputwide"
                             required="false"
                             disabled="#{adminTask.mailTemplate == null}">
                    <f:ajax render="@this msgBcc mnuTemplate btnMailTemplateSave :logout:remaining" listener="#{adminTask.mailTemplateChangeListener}"/>
                </h:inputText>
            </div>

            <div class="inputPart">
                <h:outputLabel for="txtMailSubject" value="#{msg.lblMailSubject}"/>
                <h:message for="txtMailSubject" id="msgMailSubject" styleClass="errorMessage"/>
                <h:inputText id="txtMailSubject"
                             value="#{adminTask.mailTemplate.subject}"
                             styleClass="inputwide"
                             required="true"
                             disabled="#{adminTask.mailTemplate == null}">
                    <f:ajax render="@this msgMailSubject mnuTemplate btnMailTemplateSave :logout:remaining" listener="#{adminTask.mailTemplateChangeListener}"/>
                </h:inputText>
            </div>

            <div class="inputPart">
                <h:outputLabel for="txtMailBody" value="#{msg.lblMailBody}"/>
                <h:message for="txtMailBody" id="msgMailBody" styleClass="errorMessage"/>
                <h:inputTextarea id="txtMailBody"
                                 value="#{adminTask.mailTemplate.body}"
                                 styleClass="areaHuge"
                                 required="true"
                                 disabled="#{adminTask.mailTemplate == null}">
                    <f:ajax render="@this msgMailBody mnuTemplate btnMailTemplateSave :logout:remaining" listener="#{adminTask.mailTemplateChangeListener}"/>
                </h:inputTextarea>
            </div>


            <div class="toolBar">
                <h:commandLink styleClass="button" value="#{msg.btnDelete}" action="#{adminTask.deleteMailTemplate}" immediate="true">
                    <cb:confirmDelete/>
                </h:commandLink>
                <h:commandLink styleClass="button" value="#{msg.btnSave}"
                               id="btnMailTemplateSave" action="#{adminTask.saveMailTemplate}"
                               immediate="false" disabled="#{adminTask.mailTemplate == null || !adminTask.templateChanged}"/>
            </div>

        </h:form>

    </ui:define>
</ui:composition>
