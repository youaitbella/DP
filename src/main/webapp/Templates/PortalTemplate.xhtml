<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core">

    <f:metadata>
        <f:event type="preRenderView" listener="#{requestController.forceLoginIfNotLoggedIn}"/>
        <f:phaseListener type="org.inek.dataportal.common.LifeCycleListener"/>
    </f:metadata>
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link type="text/css" rel="stylesheet" href="/DataPortal/javax.faces.resource/dataportal.css.xhtml?ln=css&amp;version=#{applicationTools.version}" />
        <!--h:outputStylesheet name="dataportal.css" library="css" /-->
        <h:outputScript name="clientutils.js" library="script"/>
    </h:head>

    <h:body>
        <div class="noPrint">
            <!--
            <style>.input1{width: 12px;}</style>
            <div  style="border-style: solid; border-color: red; border-width: 1px;">
                Es wurde eine alte Version des Internet-Explorers festgestellt. Für eine verbesserte Darstellung aktualisieren Sie bitte Ihren Browser. Eine Liste der geprüften Browser entnehmen Sie bitte dem Handbuch des InEK Datenportals.
            </div>
            -->
            <!--[if lt IE 11]>
                Ihr Browser wurde als Internet-Explorers erkannt. Bitte beachten Sie die Hinweise im Handbuch, Abschnitt "getestete Browser"
            <![endif]-->
        </div>
        <div id="wrapper">
            <div id="top">
                <div class="left">
                    <h:graphicImage alt="InEK GmbH" name="InEK.gif" library="Image"/>
                </div>
                <div class="right">
                    <div id="globalLinks">
                        <ul>
                            <li class="firstelement"><a href="http://g-drg.de/cms" title="zur Startseite wechseln">Home</a></li>
                            <li class="lastelement"><a href="http://g-drg.de/cms/Impressum" title="zum Impressum wechseln">Impressum</a></li>
                        </ul>
                        <c:if test="#{sessionController.loggedIn}">
                            <h:form id="logout">
                                <h:outputLabel styleClass="label" value="#{msg.lblWelcome} #{sessionController.user}"/>
                                <h:outputLabel styleClass="light" value="(#{msg.lblAutoLogout}"/>
                                &nbsp;
                                <h:outputText id="remaining" styleClass="light" value="#{sessionController.remainingTime}"/>
                                <h:outputLabel styleClass="light" value="s)"/>
                                <h:commandLink value="#{msg.btnLogout}" action="#{sessionController.logout}"/>
                            </h:form>
                        </c:if>

                    </div>
                    <div class ="head">
                        InEK Datenportal
                    </div>
                    <div class="highlight">
                        InEK – Institut für das Entgeltsystem im Krankenhaus
                        <span class="small">v#{applicationTools.version}</span>
                    </div>
                </div>
            </div>
            <div class="defloat"></div>

            <div id="content">
                <div class="navi">
                    <h:form id="nav">
                        <ul>
                            <c:if test="#{sessionController.loggedIn}">
                                <li>
                                    <h:commandLink value="#{msg.btnLogout}" action="#{sessionController.logout}"/>
                                </li>
                            </c:if>
                            <ui:repeat value="#{sessionController.topics}" var="topic">
                                <li class="#{topic.active ? 'activemenu' : 'menu'}">
                                    <h:commandLink action="#{sessionController.navigate(topic.outcome)}" value="#{topic.title}" immediate="true">
                                        <h:panelGroup rendered="#{documentList.renderNumDocs(topic.title)}" styleClass="notifier">
                                            <h:outputLabel id="docs" styleClass="notifierNum" value="#{documentList.numberOfUnreadDocs}" />
                                        </h:panelGroup>
                                    </h:commandLink>
                                </li>
                            </ui:repeat>
                            <ui:insert name="navItems">additional navigation items</ui:insert>
                            <li>
                                <a href="/DataPortal/resources/manual/InEK-Datenportal.pdf">Anwenderhandbuch</a>
                            </li>
                        </ul>
                    </h:form>

                    <h:dataTable value="#{announcementBean.announcements.stream().filter(a->a.warning).toList()}" var="a" styleClass="warning"
                                 rendered="#{announcementBean.announcements.stream().filter(a->a.warning).toList().size() gt 0}">
                        <h:column>
                            <h:outputText value="#{a.text}"/>
                        </h:column>
                    </h:dataTable>

                    <h:dataTable value="#{announcementBean.announcements.stream().filter(a->!a.warning).toList()}" var="a" styleClass="hint"
                                 rendered="#{announcementBean.announcements.stream().filter(a->!a.warning).toList().size() gt 0}">
                        <h:column>
                            <h:outputText value="#{a.text}"/>
                        </h:column>
                    </h:dataTable>
                </div>


                <div class="right">
                    <ui:insert name="content">Content</ui:insert>
                </div>
                <div class="defloat"></div>
            </div>
            <div id="footer">
                © InEK GmbH - Institut für das Entgeltsystem im Krankenhaus 2010 - #{sessionTools.currentYear} | Pflichtfelder sind mit * gekennzeichnet.
            </div>
        </div>

        <script type="text/javascript">
            #{sessionController.script}
        </script>
    </h:body>

</html>
